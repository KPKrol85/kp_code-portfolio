const DEBUG=!1,log=(...e)=>false,byTestId=(e,t=document)=>t.querySelector(`[data-testid="${e}"]`),$=(e,t=document)=>t.querySelector(e),$$=(e,t=document)=>Array.from(t.querySelectorAll(e));document.documentElement.classList.remove("no-js"),document.body?document.body.classList.remove("no-js"):window.addEventListener("DOMContentLoaded",()=>document.body&&document.body.classList.remove("no-js"),{once:!0}),(()=>{const e=byTestId("nav-toggle")||$(".nav-toggle"),t=byTestId("site-nav")||$("#site-nav");if(!e||!t)return;const n=window.matchMedia("(min-width: 900px)"),r=t=>{document.body.classList.toggle("nav-open",t),e.setAttribute("aria-expanded",String(t))};e.hasAttribute("aria-controls")||e.setAttribute("aria-controls",t.id||"site-nav"),e.addEventListener("click",()=>{r(!document.body.classList.contains("nav-open"))},{passive:!0}),t.addEventListener("click",e=>{e.target.closest("a")&&r(!1)},{passive:!0});let o=n.matches;const s=()=>{const e=n.matches;e&&!o&&r(!1),o=e};n.addEventListener?.("change",s),window.addEventListener("resize",s,{passive:!0}),document.addEventListener("click",e=>{if(!document.body.classList.contains("nav-open"))return;const t=e.target.closest("#site-nav"),n=e.target.closest(".nav-toggle");t||n||r(!1)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&document.body.classList.contains("nav-open")&&r(!1)}),log()})(),(()=>{const e=byTestId("menu-tabs")||document,t=$$(".tab",e),n=$$(".dish");if(!t.length)return;e===document||e.hasAttribute("role")||e.setAttribute("role","tablist"),t.forEach(e=>{e.hasAttribute("role")||e.setAttribute("role","tab")});const r=e=>{t.forEach(t=>{const n=t===e;t.classList.toggle("is-active",n),t.setAttribute("aria-selected",n?"true":"false"),t.tabIndex=n?0:-1});const r=e.dataset.filter;n.forEach(e=>{const t="all"===r||e.dataset.cat===r;e.style.display=t?"":"none"})};r($(".tab.is-active",e)||t[0]),e.addEventListener("click",e=>{const n=e.target.closest(".tab");n&&t.includes(n)&&r(n)},{passive:!0}),e.addEventListener("keydown",e=>{const n=e.target.closest(".tab");if(!n||!t.includes(n))return;const o=t.indexOf(n),s=e=>t[(e+t.length)%t.length].focus();"ArrowRight"===e.key?(e.preventDefault(),s(o+1)):"ArrowLeft"===e.key?(e.preventDefault(),s(o-1)):"Home"===e.key?(e.preventDefault(),t[0].focus()):"End"===e.key?(e.preventDefault(),t[t.length-1].focus()):"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),r(n))}),log(byTestId("menu-tabs"),t.length)})(),(()=>{const e=document.getElementById("lb")||document.querySelector(".lightbox");if(!e)return;const t="DIALOG"===e.nodeName&&"function"==typeof e.showModal,n=e.querySelector("picture")||e,r=n?.querySelector('source[type="image/avif"]')||document.getElementById("lb-avif"),o=n?.querySelector('source[type="image/webp"]')||document.getElementById("lb-webp"),s=n?.querySelector("img")||document.getElementById("lb-img"),i=e.querySelector(".lb-close")||e.querySelector("[data-close]"),a=e.querySelector(".lb-overlay");let c=e.querySelector(".lb-counter");function l(){const e=g.length;if(!c||e<=1||h<0)return c.hidden=!0,void(c.textContent="");c.hidden=!1;const t=`${h+1} / ${e}`;c.value=t,c.textContent=t}c||(c=document.createElement("output"),c.className="lb-counter",c.setAttribute("aria-live","polite"),c.setAttribute("aria-atomic","true"),e.appendChild(c)),t||(e.setAttribute("hidden",""),e.setAttribute("aria-hidden","true"));const d=e=>{if(!e)return"";try{return new URL(e,location.href).href}catch{return e}},u=(e="")=>{if(!e)return"";return d(e).replace(/[?#].*$/,"").replace(/\.(avif|webp|jpe?g|png)$/i,"")},m=e=>{if(!e)return"";try{const t=e.dataset&&e.dataset.full;if(t)return d(t)}catch(e){}const t=e.getAttribute&&e.getAttribute("data-full");if(t)return d(t);const n=e.getAttribute&&e.getAttribute("href");if(n)return d(n);const r=e.querySelector&&e.querySelector("img");return r&&(r.currentSrc||r.src)||""},f=(e,t="")=>{if(!e)return;const n=u(e);n&&(r&&(r.srcset=`${n}.avif`),o&&(o.srcset=`${n}.webp`),s&&(s.src=`${n}.jpg`,s.alt=t||""))};let h=-1,g=[],b=null;const v=e=>e?Array.from(e.querySelectorAll(".g-item")).filter(e=>!e.hidden&&null!==e.offsetParent):[],y=()=>Array.from(document.querySelectorAll(".dish-thumb")).filter(e=>!e.hidden&&null!==e.offsetParent),p=(n,r,o=-1,s=[])=>{if(!n)return;b=document.activeElement,g=Array.isArray(s)&&s.length?s:v(document.querySelector(".gallery-grid"))||[],g.length||(g=y());const a=d(n);if(f(a,r),h="number"==typeof o&&o>=0?o:g.findIndex(e=>{const t=m(e)||"";return t&&d(t)===a}),-1===h&&g.length&&(h=0),t)try{e.open||e.showModal()}catch(e){console.error(e)}else e.removeAttribute("hidden"),e.setAttribute("aria-hidden","false"),e.classList.add("open"),document.body.classList.add("no-scroll");i&&"function"==typeof i.focus&&i.focus(),l(),w(1),w(-1)},A=()=>{t?e.open&&e.close():(e.classList.remove("open"),document.body.classList.remove("no-scroll"),e.setAttribute("aria-hidden","true"),e.setAttribute("hidden",""),setTimeout(()=>{r?.removeAttribute("srcset"),o?.removeAttribute("srcset"),s?.removeAttribute("src")},170)),b&&"function"==typeof b.focus&&b.focus(),h=-1,g=[],c&&(c.hidden=!0,c.textContent="")},E=e=>{if(!g||!g.length)return;h=(e+g.length)%g.length;const t=g[h],n=m(t)||"",r=t?.querySelector("img")?.alt||t?.getAttribute("aria-label")||"";f(n,r),l()};function w(e){if(!g.length||-1===h)return;const t=(h+e+g.length)%g.length,n=g[t],r=m(n)||"";if(r){const e=u(r);[`${e}.webp`,`${e}.avif`,`${e}.jpg`].forEach(e=>{(new Image).src=e})}}document.addEventListener("click",e=>{const t=e.target.closest(".dish-thumb");if(t){const n=m(t),r=t.querySelector("img")?.alt||t.getAttribute("aria-label")||"";"A"===t.tagName&&e.preventDefault();const o=y(),s=o.indexOf(t);return void p(n,r,s>=0?s:-1,o)}const n=e.target.closest(".g-item");if(n){const t=m(n),r=n.querySelector("img")?.alt||n.getAttribute("aria-label")||"";"A"===n.tagName&&e.preventDefault();const o=n.closest(".gallery-grid"),s=v(o),i=s.indexOf(n);p(t,r,i>=0?i:-1,s)}}),i?.addEventListener("click",A),a&&a.addEventListener("click",A),e.addEventListener("click",t=>{t.target===e&&A()}),document.addEventListener("keydown",n=>{if("Escape"!==n.key)return"ArrowLeft"===n.key?(n.preventDefault(),void(g.length&&E(-1===h?0:h-1))):"ArrowRight"===n.key?(n.preventDefault(),void(g.length&&E(-1===h?0:h+1))):void 0;(t?e.open:e.classList.contains("open"))&&A()});let L=e.querySelector(".lb-prev"),k=e.querySelector(".lb-next");const q=(e,t,n)=>{const r=document.createElement("button");return r.className=e,r.type="button",r.setAttribute("aria-label",t),r.innerHTML=n,r};L||(L=q("lb-prev","Poprzednie zdjęcie",'<svg class="chev" viewBox="0 0 24 24" aria-hidden="true"><path d="M15 19L8 12l7-7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'),e.appendChild(L)),k||(k=q("lb-next","Następne zdjęcie",'<svg class="chev" viewBox="0 0 24 24" aria-hidden="true"><path d="M9 5l7 7-7 7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'),e.appendChild(k));L.addEventListener("click",e=>{e.stopPropagation(),g.length&&E(-1===h?0:h-1)}),k.addEventListener("click",e=>{e.stopPropagation(),g.length&&E(-1===h?0:h+1)}),(()=>{if(!s)return;const e="PointerEvent"in window;let t=0,n=0,r=0,o=0,i=!1,a=!1;const c=()=>{s.style.transition="transform .18s ease",s.style.transform="translate3d(0,0,0)",s.addEventListener("transitionend",()=>{s.style.willChange=""},{once:!0})},l=(e,s)=>{t=e,n=s,r=0,o=0,i=!0,a=!1},d=(e,c,l)=>{if(i){if(r=e-t,o=c-n,!a&&Math.abs(r)>8){const e=Math.abs(o/(r||1));a=e<.577}a&&(l?.preventDefault?.(),(e=>{s.style.transition="none",s.style.transform=`translate3d(${e}px,0,0)`,s.style.willChange="transform"})(r))}},u=()=>{if(i)if(i=!1,a&&Math.abs(r)>60&&g.length){const e=r<0?1:-1;s.style.transition="transform .12s ease",s.style.transform=`translate3d(${Math.sign(r)*window.innerWidth*.25}px,0,0)`,setTimeout(()=>{E(-1===h?0:h+e),s.style.transition="none",s.style.transform=`translate3d(${28*Math.sign(-r)}px,0,0)`,requestAnimationFrame(()=>c()),w(1),w(-1)},90)}else c()};e?(s.addEventListener("pointerdown",e=>{"mouse"!==e.pointerType&&l(e.clientX,e.clientY)},{passive:!0}),s.addEventListener("pointermove",e=>{"mouse"!==e.pointerType&&d(e.clientX,e.clientY,e)},{passive:!1}),s.addEventListener("pointerup",u,{passive:!0}),s.addEventListener("pointercancel",u,{passive:!0})):(s.addEventListener("touchstart",e=>{const t=e.touches[0];t&&l(t.clientX,t.clientY)},{passive:!0}),s.addEventListener("touchmove",e=>{const t=e.touches[0];t&&d(t.clientX,t.clientY,e)},{passive:!1}),s.addEventListener("touchend",u,{passive:!0}),s.addEventListener("touchcancel",u,{passive:!0}))})();const S=e,x=!!(S.requestFullscreen||S.webkitRequestFullscreen||S.msRequestFullscreen),$=()=>!!(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement),I=()=>e.classList.add("is-zoomed"),D=()=>e.classList.remove("is-zoomed"),C=t=>e.classList.toggle("is-fs",!!t);async function M(){if(x)if($())await(document.exitFullscreen?.()||document.webkitExitFullscreen?.()||document.msExitFullscreen?.()),C(!1);else try{await(S.requestFullscreen?.()||S.webkitRequestFullscreen?.()||S.msRequestFullscreen?.()),C(!0)}catch{I(),C(!0)}else e.classList.contains("is-zoomed")?(D(),C(!1)):(I(),C(!0))}e.addEventListener("close",()=>{D(),C(!1)}),document.addEventListener("fullscreenchange",()=>C($())),s.addEventListener("dblclick",e=>{e.preventDefault(),M()});let T=0;s.addEventListener("touchend",e=>{const t=Date.now();t-T<300?(e.preventDefault(),M(),T=0):T=t},{passive:!1}),e.addEventListener("keydown",e=>{"f"!==e.key&&"F"!==e.key||(e.preventDefault(),M())}),window.openLB=(e,t,n)=>p(e,t,n),window.closeLB=A,console.log("lightbox ready →",t?"<dialog>":"<div>")})(),(()=>{const e=byTestId("booking-form")||$("#booking-form"),t=$("#form-msg");if(!e||!t)return;const n=e.querySelector(".btn-form");t.hasAttribute("aria-live")||t.setAttribute("aria-live","polite"),t.hasAttribute("role")||t.setAttribute("role","status");const r=e=>{n&&(e?(n.dataset.label||(n.dataset.label=n.textContent.trim()),n.textContent="Wysyłanie…",n.classList.add("is-loading"),n.setAttribute("aria-busy","true"),n.disabled=!0):(n.textContent=n.dataset.label||"Wyślij rezerwację",n.classList.remove("is-loading"),n.removeAttribute("aria-busy"),n.disabled=!1))};e.addEventListener("submit",o=>{if(o.preventDefault(),n&&n.classList.contains("is-loading"))return;if(e.company&&""!==e.company.value.trim())return void(t.textContent="Wykryto bota — zgłoszenie odrzucone.");if(!e.checkValidity())return e.reportValidity?.(),void(t.textContent="Uzupełnij wymagane pola.");r(!0),t.textContent="";const s=1e3+200*Math.random();setTimeout(()=>{try{t.textContent="Dziękujemy! Oddzwonimy, aby potwierdzić rezerwację.",e.reset()}finally{r(!1)}},s);e.addEventListener("reset",()=>{},{once:!0}),e.addEventListener("submit",()=>{},{once:!0})}),log()})(),(()=>{const e=$("#year");e&&(e.textContent=(new Date).getFullYear())})(),(()=>{const e=byTestId("theme-toggle")||$(".theme-toggle");if(!e)return;const t="theme",n=document.documentElement,r=window.matchMedia("(prefers-color-scheme: dark)"),o=r.matches,s=localStorage.getItem(t);e.hasAttribute("role")||e.setAttribute("role","button");const i=e=>"dark"===e?"☀":"☾",a=t=>{const r=$(".theme-icon",e);"light"===t||"dark"===t?(n.setAttribute("data-theme",t),e.setAttribute("aria-pressed",String("dark"===t)),r&&(r.textContent=i(t))):(n.removeAttribute("data-theme"),e.setAttribute("aria-pressed","false"),r&&(r.textContent=i(o?"dark":"light")))};a(s??(o?"dark":"light")),e.addEventListener("click",()=>{const e="dark"===(n.getAttribute("data-theme")||(o?"dark":"light"))?"light":"dark";localStorage.setItem(t,e),a(e)}),r.addEventListener("change",e=>{localStorage.getItem(t)||a(e.matches?"dark":"light")}),log()})(),(()=>{const e=$$("#site-nav a[href^='#']");if(!e.length)return;const t=new Map(e.map(e=>[e.getAttribute("href").slice(1),e])),n=n=>{n&&t.has(n)&&(e.forEach(e=>e.removeAttribute("aria-current")),t.get(n)?.setAttribute("aria-current","true"))},r=[...document.querySelectorAll("section[id]")].filter(e=>t.has(e.id));if(!r.length)return;const o=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&n(e.target.id)})},{rootMargin:"-45% 0px -50% 0px",threshold:0});r.forEach(e=>o.observe(e));(document.getElementById("site-nav")||document).addEventListener("click",t=>{const r=t.target.closest("a[href^='#']");if(!r||!e.includes(r))return;const o=r.getAttribute("href").slice(1);n(o)},{passive:!0}),location.hash&&n(location.hash.slice(1))})(),(()=>{const e=byTestId("scroll-down")||$(".scroll-down"),t=byTestId("scroll-up")||$(".scroll-up"),n=window.matchMedia("(prefers-reduced-motion: reduce)").matches?"auto":"smooth",r=()=>Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);e?.addEventListener("click",()=>{const e=Math.max(0,r()-window.innerHeight);window.scrollTo({top:e,behavior:n})}),t?.addEventListener("click",()=>window.scrollTo({top:0,behavior:n}));let o=!1;const s=()=>{o||(o=!0,requestAnimationFrame(()=>{const n=window.scrollY||window.pageYOffset;if(e){const t=window.innerHeight+n>=r()-100;e.classList.toggle("is-hidden",t)}t&&t.classList.toggle("is-visible",n>300),o=!1}))};s(),window.addEventListener("scroll",s,{passive:!0}),log()})(),(()=>{const e=document.querySelectorAll(".btn-cta");if(!e.length)return;const t=new IntersectionObserver(e=>{e.forEach(e=>{e.target.classList.toggle("cta-inview",e.isIntersecting)})},{threshold:.2});e.forEach(e=>t.observe(e))})(),(()=>{const e=location.pathname;if(/(?:^|\/)(index\.html)?$/.test(e)||e.endsWith("/"))return;const t={"#menu":"menu.html","#galeria":"galeria.html"};document.querySelectorAll(".site-nav a[href^='#']").forEach(e=>{const n=t[e.getAttribute("href")||""];n&&e.setAttribute("href",n)})})(),function(){const e=document.querySelector(".site-nav");if(!e)return;const t=Array.from(e.querySelectorAll("a")),n=(location.pathname.split("/").pop()||"").replace(".html",""),r=(location.hash||"").replace("#","");t.forEach(e=>e.removeAttribute("aria-current"));const o=(e,t)=>{if(!t)return!1;const n=e.getAttribute("href")||"";return n.includes("#"+t)||n.endsWith(t+".html")||n.includes("/"+t+".html")||n.includes("/"+t)};if(n)for(const e of t)if(o(e,n))return void e.setAttribute("aria-current","page");if(r)for(const e of t)if(o(e,r))return void e.setAttribute("aria-current","page")}(),document.body.classList.contains("page-menu")&&(document.addEventListener("click",e=>{if(e.target.closest(".dish-more"))return;const t=document.querySelectorAll(".dish-more[open]");t.length&&t.forEach(e=>e.removeAttribute("open"))},{passive:!0}),document.addEventListener("keydown",e=>{"Escape"===e.key&&document.querySelectorAll(".dish-more[open]").forEach(e=>e.removeAttribute("open"))}),document.addEventListener("toggle",e=>{const t=e.target;t.matches?.(".dish-more")&&t.open&&document.querySelectorAll(".dish-more[open]").forEach(e=>{e!==t&&e.removeAttribute("open")})})),(()=>{const e=document.getElementById("faq")||document.querySelector(".faq");if(!e)return;const t=e.querySelectorAll("details");t.length&&t.forEach((e,t)=>{const n=e.querySelector("summary");if(!n)return;const r=e.querySelector(".content");r&&!r.id&&(r.id=`faqp-${t}-${Math.random().toString(36).slice(2)}`),r&&!n.hasAttribute("aria-controls")&&n.setAttribute("aria-controls",r.id);const o=()=>n.setAttribute("aria-expanded",e.hasAttribute("open")?"true":"false");e.addEventListener("toggle",o),o()})})(),function(){if(!document.body.classList.contains("page-gallery"))return;const e=document.querySelector(".tabs");if(!e)return;const t=Array.from(e.querySelectorAll(".tab")),n=Array.from(document.querySelectorAll(".gallery-grid .g-item"));function r(e){var r;r=e,t.forEach(e=>e.setAttribute("aria-selected",String(e===r))),t.forEach(t=>t.setAttribute("tabindex",t===e?"0":"-1"));!function(e){const t=(e||"").trim(),r=""===t||"all"===t.toLowerCase();n.forEach(e=>{const n=e.dataset.cat||e.dataset.filter||"";e.hidden=!r&&n!==t})}((e.dataset.filter||"").trim()),e.focus()}function o(e){const n=(e+t.length)%t.length;t[n].focus()}e.addEventListener("keydown",e=>{const n=e.key,s=document.activeElement,i=t.indexOf(s);if(-1!==i)return"ArrowRight"===n||"ArrowLeft"===n?(e.preventDefault(),void o("ArrowRight"===n?i+1:i-1)):"Home"===n?(e.preventDefault(),void o(0)):"End"===n?(e.preventDefault(),void o(t.length-1)):"Enter"===n||" "===n||"Spacebar"===n?(e.preventDefault(),void r(s)):void("Escape"!==n||s.blur())}),t.forEach(e=>{e.addEventListener("click",()=>r(e))}),t.forEach((e,t)=>{e.setAttribute("role","tab");const n="true"===e.getAttribute("aria-selected");e.setAttribute("tabindex",n||0===t?"0":"-1"),e.hasAttribute("aria-selected")||e.setAttribute("aria-selected",String(0===t))});r(t.find(e=>"true"===e.getAttribute("aria-selected"))||t[0])}(),window.addEventListener("scroll",()=>{document.body.classList.toggle("is-scrolled",window.scrollY>10)});
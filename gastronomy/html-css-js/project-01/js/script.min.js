const DEBUG=!1,log=(...e)=>false,byTestId=(e,t=document)=>t.querySelector(`[data-testid="${e}"]`),$=(e,t=document)=>t.querySelector(e),$$=(e,t=document)=>Array.from(t.querySelectorAll(e));function initHelpers(){document.documentElement.classList.remove("no-js"),document.body?document.body.classList.remove("no-js"):window.addEventListener("DOMContentLoaded",()=>document.body&&document.body.classList.remove("no-js"),{once:!0}),log()}function initMobileNav(){const e=byTestId("nav-toggle")||$(".nav-toggle"),t=byTestId("site-nav")||$("#site-nav");if(!e||!t)return;const n=window.matchMedia("(min-width: 900px)"),o=t=>{document.body.classList.toggle("nav-open",t),e.setAttribute("aria-expanded",String(t))};e.hasAttribute("aria-controls")||e.setAttribute("aria-controls",t.id||"site-nav"),e.addEventListener("click",()=>o(!document.body.classList.contains("nav-open")),{passive:!0}),t.addEventListener("click",e=>{e.target.closest("a")&&o(!1)},{passive:!0});let r=n.matches;const i=()=>{const e=n.matches;e&&!r&&o(!1),r=e};n.addEventListener?.("change",i),window.addEventListener("resize",i,{passive:!0}),document.addEventListener("click",e=>{if(!document.body.classList.contains("nav-open"))return;const t=e.target.closest("#site-nav"),n=e.target.closest(".nav-toggle");t||n||o(!1)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&document.body.classList.contains("nav-open")&&o(!1)}),log()}function initTabs(){const e=byTestId("menu-tabs")||document,t=$$(".tab",e);if(!t.length)return;const n=$$(".dish");e===document||e.hasAttribute("role")||e.setAttribute("role","tablist"),t.forEach(e=>{e.hasAttribute("role")||e.setAttribute("role","tab")});const o=e=>{t.forEach(t=>{const n=t===e;t.classList.toggle("is-active",n),t.setAttribute("aria-selected",n?"true":"false"),t.tabIndex=n?0:-1});const o=e.dataset.filter;n.forEach(e=>{const t="all"===o||e.dataset.cat===o;e.style.display=t?"":"none"})};o($(".tab.is-active",e)||t[0]),e.addEventListener("click",e=>{const n=e.target.closest(".tab");n&&t.includes(n)&&o(n)},{passive:!0}),e.addEventListener("keydown",e=>{const n=e.target.closest(".tab");if(!n||!t.includes(n))return;const r=t.indexOf(n),i=e=>t[(e+t.length)%t.length].focus();"ArrowRight"===e.key?(e.preventDefault(),i(r+1)):"ArrowLeft"===e.key?(e.preventDefault(),i(r-1)):"Home"===e.key?(e.preventDefault(),t[0].focus()):"End"===e.key?(e.preventDefault(),t[t.length-1].focus()):"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),o(n))}),log(byTestId("menu-tabs"),t.length)}function initLightbox(){const e=document.getElementById("lb")||document.querySelector(".lightbox");if(!e)return;const t="DIALOG"===e.nodeName&&"function"==typeof e.showModal,n=e.querySelector("picture")||e,o=n?.querySelector('source[type="image/avif"]')||document.getElementById("lb-avif"),r=n?.querySelector('source[type="image/webp"]')||document.getElementById("lb-webp"),i=n?.querySelector("img")||document.getElementById("lb-img"),s=e.querySelector(".lb-close")||e.querySelector("[data-close]"),a=e.querySelector(".lb-overlay");let l=e.querySelector(".lb-counter");function c(){const e=f.length;if(!l||e<=1||g<0)return l.hidden=!0,void(l.textContent="");l.hidden=!1;const t=`${g+1} / ${e}`;l.value=t,l.textContent=t}l||(l=document.createElement("output"),l.className="lb-counter",l.setAttribute("aria-live","polite"),l.setAttribute("aria-atomic","true"),e.appendChild(l)),t||(e.setAttribute("hidden",""),e.setAttribute("aria-hidden","true"));const d=e=>{if(!e)return"";try{return new URL(e,location.href).href}catch{return e}},u=(e="")=>{if(!e)return"";return d(e).replace(/[?#].*$/,"").replace(/\.(avif|webp|jpe?g|png)$/i,"")},m=e=>{if(!e)return"";try{const t=e.dataset&&e.dataset.full;if(t)return d(t)}catch{}const t=e.getAttribute&&e.getAttribute("data-full");if(t)return d(t);const n=e.getAttribute&&e.getAttribute("href");if(n&&!n.startsWith("#"))return d(n);const o=e.querySelector&&e.querySelector("img");return o&&(o.currentSrc||o.src)||""},h=(e,t="")=>{if(!e)return;const n=u(e);n&&(o&&(o.srcset=`${n}.avif`),r&&(r.srcset=`${n}.webp`),i&&(i.src=`${n}.jpg`,i.alt=t||""))};let g=-1,f=[],v=null,b=0,y="",p="",E="",A="";const w=e=>e?Array.from(e.querySelectorAll(".g-item")).filter(e=>!e.hidden&&null!==e.offsetParent):[],L=()=>Array.from(document.querySelectorAll(".dish-thumb")).filter(e=>!e.hidden&&null!==e.offsetParent),S=(n,o,r=-1,i=[])=>{if(!n)return;v=document.activeElement,f=Array.isArray(i)&&i.length?i:w(document.querySelector(".gallery-grid"))||[],f.length||(f=L());const a=d(n);if(h(a,o),g="number"==typeof r&&r>=0?r:f.findIndex(e=>{const t=m(e)||"";return t&&d(t)===a}),-1===g&&f.length&&(g=0),y=location.hash||"",y&&history.replaceState(null,"",location.pathname+location.search),b=window.scrollY,p=document.body.style.position,E=document.body.style.top,A=document.body.style.width,document.documentElement.style.scrollBehavior="auto",document.body.style.position="fixed",document.body.style.top=`-${b}px`,document.body.style.width="100%",t)try{e.open||e.showModal()}catch(e){console.error(e)}else e.removeAttribute("hidden"),e.setAttribute("aria-hidden","false"),e.classList.add("open");s&&"function"==typeof s.focus&&s.focus(),c(),T(1),T(-1)},k=()=>{t?e.open&&e.close():(e.classList.remove("open"),e.setAttribute("aria-hidden","true"),e.setAttribute("hidden",""),setTimeout(()=>{o?.removeAttribute("srcset"),r?.removeAttribute("srcset"),i?.removeAttribute("src")},170)),y&&history.replaceState(null,"",location.pathname+location.search+y),document.body.style.position=p,document.body.style.top=E,document.body.style.width=A,window.scrollTo(0,b),v&&"function"==typeof v.focus&&v.focus(),g=-1,f=[],l&&(l.hidden=!0,l.textContent="")},q=e=>{if(!f||!f.length)return;g=(e+f.length)%f.length;const t=f[g],n=m(t)||"",o=t?.querySelector("img")?.alt||t?.getAttribute("aria-label")||"";h(n,o),c()};function T(e){if(!f.length||-1===g)return;const t=(g+e+f.length)%f.length,n=f[t],o=m(n)||"";if(o){const e=u(o);[`${e}.webp`,`${e}.avif`,`${e}.jpg`].forEach(e=>{(new Image).src=e})}}document.addEventListener("click",e=>{const t=e.target.closest(".dish-thumb");if(t){const n=m(t),o=t.querySelector("img")?.alt||t.getAttribute("aria-label")||"";e.target.closest("a")&&e.preventDefault();const r=L(),i=r.indexOf(t);return void S(n,o,i>=0?i:-1,r)}const n=e.target.closest(".g-item");if(n){const t=m(n),o=n.querySelector("img")?.alt||n.getAttribute("aria-label")||"";e.target.closest("a")&&e.preventDefault();const r=n.closest(".gallery-grid"),i=w(r),s=i.indexOf(n);S(t,o,s>=0?s:-1,i)}});const x=document.getElementById("galeria-grid")||document.querySelector("#galeria-grid");x&&x.addEventListener("click",e=>{e.target.closest('a[href^="#"]')&&(e.preventDefault(),e.stopPropagation())},!0),window.addEventListener("hashchange",()=>{(t&&e.open||!t&&e.classList.contains("open"))&&(history.replaceState(null,"",location.pathname+location.search),window.scrollTo(0,b))},!0),s?.addEventListener("click",k),a&&a.addEventListener("click",k),e.addEventListener("click",t=>{t.target===e&&k()}),e.addEventListener("cancel",e=>{e.preventDefault(),k()}),document.addEventListener("keydown",n=>{if("Escape"!==n.key)return"ArrowLeft"===n.key?(n.preventDefault(),void(f.length&&q(-1===g?0:g-1))):"ArrowRight"===n.key?(n.preventDefault(),void(f.length&&q(-1===g?0:g+1))):void 0;(t?e.open:e.classList.contains("open"))&&k()});let $=e.querySelector(".lb-prev"),C=e.querySelector(".lb-next");const I=(e,t,n)=>{const o=document.createElement("button");return o.className=e,o.type="button",o.setAttribute("aria-label",t),o.innerHTML=n,o};$||($=I("lb-prev","Poprzednie zdjęcie",'<svg class="chev" viewBox="0 0 24 24" aria-hidden="true"><path d="M15 19L8 12l7-7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'),e.appendChild($)),C||(C=I("lb-next","Następne zdjęcie",'<svg class="chev" viewBox="0 0 24 24" aria-hidden="true"><path d="M9 5l7 7-7 7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'),e.appendChild(C));$.addEventListener("click",e=>{e.stopPropagation(),f.length&&q(-1===g?0:g-1)}),C.addEventListener("click",e=>{e.stopPropagation(),f.length&&q(-1===g?0:g+1)}),function(){if(!i)return;const e="PointerEvent"in window;let t=0,n=0,o=0,r=0,s=!1,a=!1;const l=()=>{i.style.transition="transform .18s ease",i.style.transform="translate3d(0,0,0)",i.addEventListener("transitionend",()=>{i.style.willChange=""},{once:!0})},c=(e,i)=>{t=e,n=i,o=0,r=0,s=!0,a=!1},d=(e,l,c)=>{if(s){if(o=e-t,r=l-n,!a&&Math.abs(o)>8){const e=Math.abs(r/(o||1));a=e<.577}a&&(c?.preventDefault?.(),(e=>{i.style.transition="none",i.style.transform=`translate3d(${e}px,0,0)`,i.style.willChange="transform"})(o))}},u=()=>{if(s)if(s=!1,a&&Math.abs(o)>60&&f.length){const e=o<0?1:-1;i.style.transition="transform .12s ease",i.style.transform=`translate3d(${Math.sign(o)*window.innerWidth*.25}px,0,0)`,setTimeout(()=>{q(-1===g?0:g+e),i.style.transition="none",i.style.transform=`translate3d(${28*Math.sign(-o)}px,0,0)`,requestAnimationFrame(()=>l()),T(1),T(-1)},90)}else l()};e?(i.addEventListener("pointerdown",e=>{"mouse"!==e.pointerType&&c(e.clientX,e.clientY)},{passive:!0}),i.addEventListener("pointermove",e=>{"mouse"!==e.pointerType&&d(e.clientX,e.clientY,e)},{passive:!1}),i.addEventListener("pointerup",u,{passive:!0}),i.addEventListener("pointercancel",u,{passive:!0})):(i.addEventListener("touchstart",e=>{const t=e.touches[0];t&&c(t.clientX,t.clientY)},{passive:!0}),i.addEventListener("touchmove",e=>{const t=e.touches[0];t&&d(t.clientX,t.clientY,e)},{passive:!1}),i.addEventListener("touchend",u,{passive:!0}),i.addEventListener("touchcancel",u,{passive:!0}))}();const M=e,D=!!(M.requestFullscreen||M.webkitRequestFullscreen||M.msRequestFullscreen),F=()=>!!(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement),R=()=>e.classList.add("is-zoomed"),O=()=>e.classList.remove("is-zoomed"),B=t=>e.classList.toggle("is-fs",!!t);async function H(){if(D)if(F())await(document.exitFullscreen?.()||document.webkitExitFullscreen?.()||document.msExitFullscreen?.()),B(!1);else try{await(M.requestFullscreen?.()||M.webkitRequestFullscreen?.()||M.msRequestFullscreen?.()),B(!0)}catch{R(),B(!0)}else e.classList.contains("is-zoomed")?(O(),B(!1)):(R(),B(!0))}e.addEventListener("close",()=>{O(),B(!1)}),document.addEventListener("fullscreenchange",()=>B(F())),i?.addEventListener("dblclick",e=>{e.preventDefault(),H()});let z=0;i?.addEventListener("touchend",e=>{const t=Date.now();t-z<300?(e.preventDefault(),H(),z=0):z=t},{passive:!1}),e.addEventListener("keydown",e=>{"f"!==e.key&&"F"!==e.key||(e.preventDefault(),H())}),window.openLB=(e,t,n)=>S(e,t,n),window.closeLB=k,console.log("lightbox ready →",t?"<dialog>":"<div>")}function initReservationForm(){const e=byTestId("booking-form")||$("#booking-form"),t=$("#form-msg");if(!e||!t)return;const n=e.querySelector(".btn-form");t.hasAttribute("aria-live")||t.setAttribute("aria-live","polite"),t.hasAttribute("role")||t.setAttribute("role","status");const o=e=>{n&&(e?(n.dataset.label||(n.dataset.label=n.textContent.trim()),n.textContent="Wysyłanie…",n.classList.add("is-loading"),n.setAttribute("aria-busy","true"),n.disabled=!0):(n.textContent=n.dataset.label||"Wyślij rezerwację",n.classList.remove("is-loading"),n.removeAttribute("aria-busy"),n.disabled=!1))};e.addEventListener("submit",r=>{if(r.preventDefault(),n&&n.classList.contains("is-loading"))return;if(e.company&&""!==e.company.value.trim())return void(t.textContent="Wykryto bota — zgłoszenie odrzucone.");if(!e.checkValidity())return e.reportValidity?.(),void(t.textContent="Uzupełnij wymagane pola.");o(!0),t.textContent="";const i=1e3+200*Math.random();setTimeout(()=>{try{t.textContent="Dziękujemy! Oddzwonimy, aby potwierdzić rezerwację.",e.reset()}finally{o(!1)}},i)}),log()}function initFooterYear(){const e=$("#year");e&&(e.textContent=(new Date).getFullYear())}function initThemeSwitcher(){const e=byTestId("theme-toggle")||$(".theme-toggle");if(!e)return;const t="theme",n=document.documentElement,o=window.matchMedia("(prefers-color-scheme: dark)"),r=o.matches,i=localStorage.getItem(t);e.hasAttribute("role")||e.setAttribute("role","button");const s=e=>"dark"===e?"☀":"☾",a=t=>{const o=$(".theme-icon",e);"light"===t||"dark"===t?(n.setAttribute("data-theme",t),e.setAttribute("aria-pressed",String("dark"===t)),o&&(o.textContent=s(t))):(n.removeAttribute("data-theme"),e.setAttribute("aria-pressed","false"),o&&(o.textContent=s(r?"dark":"light")))};a(i??(r?"dark":"light")),e.addEventListener("click",()=>{const e="dark"===(n.getAttribute("data-theme")||(r?"dark":"light"))?"light":"dark";localStorage.setItem(t,e),a(e)}),o.addEventListener("change",e=>{localStorage.getItem(t)||a(e.matches?"dark":"light")}),log()}function initScrollspy(){const e=$$("#site-nav a[href^='#']");if(!e.length)return;const t=new Map(e.map(e=>[e.getAttribute("href").slice(1),e])),n=n=>{n&&t.has(n)&&(e.forEach(e=>e.removeAttribute("aria-current")),t.get(n)?.setAttribute("aria-current","true"))},o=[...document.querySelectorAll("section[id]")].filter(e=>t.has(e.id));if(!o.length)return;const r=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&n(e.target.id)})},{rootMargin:"-45% 0px -50% 0px",threshold:0});o.forEach(e=>r.observe(e));(document.getElementById("site-nav")||document).addEventListener("click",t=>{const o=t.target.closest("a[href^='#']");if(!o||!e.includes(o))return;const r=o.getAttribute("href").slice(1);n(r)},{passive:!0}),location.hash&&n(location.hash.slice(1)),log(e.length)}function initScrollButtons(){const e=byTestId("scroll-down")||$(".scroll-down"),t=byTestId("scroll-up")||$(".scroll-up");if(!e&&!t)return;const n=window.matchMedia("(prefers-reduced-motion: reduce)").matches?"auto":"smooth",o=()=>Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);e?.addEventListener("click",()=>{const e=Math.max(0,o()-window.innerHeight);window.scrollTo({top:e,behavior:n})}),t?.addEventListener("click",()=>window.scrollTo({top:0,behavior:n}));let r=!1;const i=()=>{r||(r=!0,requestAnimationFrame(()=>{const n=window.scrollY||window.pageYOffset;if(e){const t=window.innerHeight+n>=o()-100;e.classList.toggle("is-hidden",t)}t&&t.classList.toggle("is-visible",n>300),r=!1}))};i(),window.addEventListener("scroll",i,{passive:!0}),log()}function initCtaPulse(){const e=document.querySelectorAll(".btn-cta");if(!e.length)return;const t=new IntersectionObserver(e=>{e.forEach(e=>{e.target.classList.toggle("cta-inview",e.isIntersecting)})},{threshold:.2});e.forEach(e=>t.observe(e)),log(e.length)}function initSmartNav(){const e=location.pathname;if(/(?:^|\/)(index\.html)?$/.test(e)||e.endsWith("/"))return;const t={"#menu":"menu.html","#galeria":"galeria.html"},n=document.querySelectorAll(".site-nav a[href^='#']");n.length&&(n.forEach(e=>{const n=t[e.getAttribute("href")||""];n&&e.setAttribute("href",n)}),log(n.length))}function initAriaCurrent(){const e=document.querySelector(".site-nav");if(!e)return;const t=Array.from(e.querySelectorAll("a")),n=(location.pathname.split("/").pop()||"").replace(".html",""),o=(location.hash||"").replace("#","");t.forEach(e=>e.removeAttribute("aria-current"));const r=(e,t)=>{if(!t)return!1;const n=e.getAttribute("href")||"";return n.includes("#"+t)||n.endsWith(t+".html")||n.includes("/"+t+".html")||n.includes("/"+t)};if(n)for(const e of t)if(r(e,n))return void e.setAttribute("aria-current","page");if(o)for(const e of t)if(r(e,o))return void e.setAttribute("aria-current","page");log(t.length)}function initPageMenuPanel(){document.body.classList.contains("page-menu")&&(document.addEventListener("click",e=>{if(e.target.closest(".dish-more"))return;const t=document.querySelectorAll(".dish-more[open]");t.length&&t.forEach(e=>e.removeAttribute("open"))},{passive:!0}),document.addEventListener("keydown",e=>{"Escape"===e.key&&document.querySelectorAll(".dish-more[open]").forEach(e=>e.removeAttribute("open"))}),document.addEventListener("toggle",e=>{const t=e.target;t.matches?.(".dish-more")&&t.open&&document.querySelectorAll(".dish-more[open]").forEach(e=>{e!==t&&e.removeAttribute("open")})}),log())}function initFaqAria(){const e=document.getElementById("faq")||document.querySelector(".faq");if(!e)return;const t=e.querySelectorAll("details");t.length&&(t.forEach((e,t)=>{const n=e.querySelector("summary");if(!n)return;const o=e.querySelector(".content");o&&!o.id&&(o.id=`faqp-${t}-${Math.random().toString(36).slice(2)}`),o&&!n.hasAttribute("aria-controls")&&n.setAttribute("aria-controls",o.id);const r=()=>n.setAttribute("aria-expanded",e.hasAttribute("open")?"true":"false");e.addEventListener("toggle",r),r()}),log(t.length))}function initGalleryFilter(){const e=document.querySelector("main.page-gallery");if(!e)return;const t=e.querySelector(".tabs");if(!t)return;const n=Array.from(t.querySelectorAll(".tab")),o=Array.from(e.querySelectorAll("#galeria-grid .g-item")),r=e=>(e||"").toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim();function i(e){var t;t=e,n.forEach(e=>{const n=e===t;e.setAttribute("aria-selected",String(n)),e.classList.toggle("is-active",n)}),n.forEach(t=>t.setAttribute("tabindex",t===e?"0":"-1"));!function(e){const t=r(e),n=""===t||"all"===t;o.forEach(e=>{const o=e.dataset.cat||e.dataset.filter||"",i=r(o).split(/[\s,]+/).filter(Boolean);e.hidden=!n&&!i.includes(t)})}(e.dataset.filter||""),e.focus()}function s(e){const t=(e+n.length)%n.length;n[t].focus()}t.addEventListener("keydown",e=>{const t=e.key,o=document.activeElement,r=n.indexOf(o);if(-1!==r)return"ArrowRight"===t||"ArrowLeft"===t?(e.preventDefault(),void s("ArrowRight"===t?r+1:r-1)):"Home"===t?(e.preventDefault(),void s(0)):"End"===t?(e.preventDefault(),void s(n.length-1)):"Enter"===t||" "===t||"Spacebar"===t?(e.preventDefault(),void i(o)):void("Escape"===t&&o.blur())}),n.forEach(e=>e.addEventListener("click",()=>i(e))),n.forEach((e,t)=>{e.setAttribute("role","tab");const n=e.getAttribute("aria-selected"),o=n?"true"===n:0===t;e.setAttribute("aria-selected",String(o)),e.setAttribute("tabindex",o?"0":"-1")});const a=n.find(e=>"true"===e.getAttribute("aria-selected"))||n[0];a&&i(a),log(n.length,o.length)}function initStickyShadow(){const e=()=>{document.body.classList.toggle("is-scrolled",window.scrollY>10)};e(),window.addEventListener("scroll",e,{passive:!0}),log()}function initScrollToTop(){const e=window.matchMedia("(prefers-reduced-motion: reduce)").matches;document.addEventListener("click",t=>{const n=t.target.closest("a.brand");if(!n)return;const o=n.getAttribute("href")||"";if(!o.startsWith("#"))return;o.includes("#top")&&(t.preventDefault(),window.scrollTo({top:0,behavior:e?"auto":"smooth"}))}),log()}function initScrollTargets(){const e=document.querySelectorAll("[data-target]");e.length&&(e.forEach(e=>{e.addEventListener("click",()=>{const t=document.querySelector(e.dataset.target);t?.scrollIntoView({behavior:"smooth"})})}),log(e.length))}const FEATURES=[{name:"HELPERS",init:initHelpers},{name:"THEME SWITCHER",init:initThemeSwitcher},{name:"MOBILE NAV",init:initMobileNav},{name:"FOOTER YEAR",init:initFooterYear},{name:"SMART NAV",init:initSmartNav},{name:"NAV",init:initAriaCurrent},{name:"SCROLLSPY",init:initScrollspy},{name:"STICKY SHADOW",init:initStickyShadow},{name:"SCROLL BUTTONS",init:initScrollButtons},{name:"SCROLL TO TOP",init:initScrollToTop},{name:"SCROLL TARGETS",init:initScrollTargets},{name:"CTA",init:initCtaPulse},{name:"TABS",init:initTabs},{name:"PAGE MENU",init:initPageMenuPanel},{name:"RESERVATION FORM",init:initReservationForm},{name:"GALLERY FILTER",init:initGalleryFilter},{name:"LIGHTBOX",init:initLightbox},{name:"FAQ",init:initFaqAria}];function boot(){for(const e of FEATURES)try{e.init()}catch(e){console.warn(e)}}document.addEventListener("DOMContentLoaded",boot);
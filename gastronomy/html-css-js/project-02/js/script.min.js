"use strict";function initScrollspy(e){if(e&&e.pageClass&&e.ids&&e.listSelector&&(document.body&&document.body.classList.contains(e.pageClass))){var t=Array.prototype.slice.call(document.querySelectorAll(e.listSelector));if(t.length){var n=Object.create(null);t.forEach(function(e){var t=(e.getAttribute("href")||"").replace(/^#/,"");t&&(n[t]=e)});var r=t.length?t[0].closest("ul"):null;r&&r.addEventListener("click",function(e){var t=e.target.closest('a[href^="#"]');if(t){var n=(t.getAttribute("href")||"").replace(/^#/,"");n&&(h(n),"undefined"!=typeof history&&"function"==typeof history.replaceState&&history.replaceState(null,"","#"+n))}}),h(e.ids[0]);var i=document.querySelector(".site-header"),a=e.stickySelector?document.querySelector(e.stickySelector):null,o=i?i.offsetHeight:64,c=a?a.offsetHeight:0,l="function"==typeof window.matchMedia&&window.matchMedia("(max-width: 640px)").matches,u=e.topPercent?e.topPercent:-(o+c+10)+"px",s=l?e.bottomPercentMobile||"-65%":e.bottomPercent||"-55%";if("function"==typeof IntersectionObserver){var d=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target.getAttribute("id");t&&h(t)}})},{root:null,rootMargin:u+" 0px "+s+" 0px",threshold:.01});e.ids.forEach(function(e){var t=document.getElementById(e);t&&d.observe(t)})}else{var f=(location.hash||"").replace(/^#/,"");h(f&&n[f]?f:e.ids[0])}window.addEventListener("hashchange",function(){var e=(location.hash||"").replace(/^#/,"");e&&n[e]&&h(e)});var m=!1;window.addEventListener("scroll",p,{passive:!0}),window.addEventListener("resize",p),setTimeout(v,0)}}function h(e){t.forEach(function(t){(t.getAttribute("href")||"").replace(/^#/,"")===e?(t.classList.add("is-active"),t.setAttribute("aria-current","true")):(t.classList.remove("is-active"),t.removeAttribute("aria-current"))})}function v(){o=i?i.offsetHeight:64,c=a?a.offsetHeight:0;for(var t=window.scrollY+o+c+8,n=e.ids[0],r=0;r<e.ids.length;r++){var l=document.getElementById(e.ids[r]);if(l)l.getBoundingClientRect().top+window.scrollY<=t&&(n=e.ids[r])}h(n)}function p(){m||(m=!0,requestAnimationFrame(function(){v(),m=!1}))}}function initReveal(){var e=Array.prototype.slice.call(document.querySelectorAll("[data-reveal]"));if(e.length){var t="function"==typeof window.matchMedia?window.matchMedia("(prefers-reduced-motion: reduce)"):null,n=!!t&&t.matches,r="function"==typeof window.IntersectionObserver,i=null,a=function(e){e.classList.add("is-visible")};if(e.forEach(function(e){e.classList.add("reveal")}),document.querySelectorAll("[data-reveal-group]").forEach(function(e){e.querySelectorAll("[data-reveal]").forEach(function(e,t){e.style.setProperty("--reveal-delay",(80*t).toString()+"ms")})}),r&&!n){if(i=new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting&&(a(e.target),t.unobserve(e.target))})},{root:null,rootMargin:"0px 0px -10% 0px",threshold:.15}),e.forEach(function(e){!function(e){var t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight||0;return t.top<=.9*n&&t.bottom>=0}(e)?i.observe(e):a(e)}),t){var o=function(t){t.matches&&i&&(i.disconnect(),e.forEach(a))};"function"==typeof t.addEventListener?t.addEventListener("change",o):"function"==typeof t.addListener&&t.addListener(o)}}else e.forEach(a)}}!function(){var e=document.documentElement;e.classList.add("js");var t="kp-theme",n=null,r="undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null,i=!1;function a(e){return"string"==typeof e?document.querySelector(e):e||null}function o(){var e=document.getElementById("network-status");e||((e=document.createElement("div")).id="network-status",e.className="net-status",e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),document.body.appendChild(e));var t=null,n=null;function r(r){n!==r&&(n=r,t&&(clearTimeout(t),t=null),r?(e.textContent="Połączenie przywrócone.",e.classList.add("is-visible"),e.classList.remove("is-offline"),t=setTimeout(function(){e.classList.remove("is-visible")},4e3)):(e.textContent="Jesteś offline — część treści może być niedostępna.",e.classList.add("is-visible"),e.classList.add("is-offline")),function(e){var t=document.querySelectorAll(".offline-note[data-auto]");if(e)t.forEach(function(e){e.remove()});else{var n=document.querySelector(".page--menu .page-hero__content");if(n&&!n.querySelector(".offline-note")){var r=document.createElement("p");r.className="offline-note",r.dataset.auto="true",r.setAttribute("role","status"),r.setAttribute("aria-live","polite"),r.textContent="Jesteś offline — wyświetlamy ostatnio zapisane menu. Część zdjęć może być niedostępna.",n.appendChild(r)}var i=document.querySelector(".page--gallery .page-hero__content");if(i&&!i.querySelector(".offline-note")){var a=document.createElement("p");a.className="offline-note",a.dataset.auto="true",a.setAttribute("role","status"),a.setAttribute("aria-live","polite"),a.textContent="Jesteś offline — jeśli galeria nie była wcześniej odwiedzona, część zdjęć może się nie wczytać.",i.appendChild(a)}}}(r))}r("undefined"==typeof navigator||!("onLine"in navigator)||navigator.onLine),window.addEventListener("online",function(){r(!0)}),window.addEventListener("offline",function(){r(!1)})}function c(){return"undefined"!=typeof window&&"function"==typeof window.matchMedia&&window.matchMedia("(max-width: 1023px)").matches}function l(e,t){if(e){if(!c())return e.removeAttribute("aria-hidden"),void e.removeAttribute("inert");if(e.setAttribute("aria-hidden",String(!t)),t)e.removeAttribute("inert");else try{e.setAttribute("inert","")}catch(e){}}}function u(e,t){e.setAttribute("aria-expanded",String(t));var n=a("#primary-nav");n&&(n.setAttribute("data-open",String(t)),l(n,t))}function s(r,o){o=o||{};var c="dark"===r?"dark":"light";e.setAttribute("data-theme",c),function(e){var t=a(".theme-toggle");if(t){var n="dark"===e;t.setAttribute("aria-pressed",String(n));var r=n?"Przełącz na tryb jasny":"Przełącz na tryb ciemny";t.setAttribute("aria-label",r);var i=t.querySelector(".visually-hidden");i&&(i.textContent=r)}}(c),function(e){n||(n=document.querySelector('meta[name="theme-color"]')),n&&n.setAttribute("content","dark"===e?"#181210":"#f8f1e7")}(c),o.persist&&function(e){try{localStorage.setItem(t,e),i=!0}catch(e){}}(c),o.silent||function(e){"undefined"!=typeof window&&"function"==typeof window.CustomEvent&&window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:e}}))}(c)}function d(){var n=a(".theme-toggle");if(n){var o=function(){try{var e=localStorage.getItem(t);return"dark"===e||"light"===e?e:null}catch(e){return null}}();o&&(i=!0);var c=o||e.getAttribute("data-theme");if(!c&&r&&"boolean"==typeof r.matches&&(c=r.matches?"dark":"light"),s(c||"light",{silent:!0}),n.addEventListener("click",function(){s("dark"===("dark"===e.getAttribute("data-theme")?"dark":"light")?"light":"dark",{persist:!0})}),r){var l=function(e){i||s(e.matches?"dark":"light")};"function"==typeof r.addEventListener?r.addEventListener("change",l):"function"==typeof r.addListener&&r.addListener(l)}}}"undefined"!=typeof window&&(window.initThemeToggle=d),document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("year");e&&(e.textContent=String((new Date).getFullYear())),o(),initImageFallbacks();var t=a(".nav-toggle"),n=a("#primary-nav");t&&t.addEventListener("click",function(){var e="true"===t.getAttribute("aria-expanded");u(t,!e);var n=!e;t.setAttribute("aria-label",n?"Zamknij menu":"Otwórz menu")}),n&&(l(n,t&&"true"===t.getAttribute("aria-expanded")),n.addEventListener("click",function(e){e.target.closest("a")&&c()&&t&&"true"===t.getAttribute("aria-expanded")&&(u(t,!1),t.setAttribute("aria-label","Otwórz menu"))}),window.addEventListener("resize",function(){l(n,t&&"true"===t.getAttribute("aria-expanded"))})),document.addEventListener("keyup",function(e){"Escape"===e.key&&t&&"true"===t.getAttribute("aria-expanded")&&u(t,!1)});var r="function"==typeof window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;document.querySelectorAll('a[href^="#"]').forEach(function(e){e.addEventListener("click",function(t){var n=e.getAttribute("href");if(n&&"#"!==n){var i=document.querySelector(n);i&&(t.preventDefault(),i.scrollIntoView({behavior:r?"auto":"smooth",block:"start"}),i.setAttribute("tabindex","-1"),i.focus({preventScroll:!0}))}})});var i=a(".form"),s=a("#form-status");if(i){i.setAttribute("novalidate","");var f=a("#form-progress"),m=[i.querySelector("#name"),i.querySelector("#email"),i.querySelector("#message")].filter(Boolean),h=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;function b(e,t){return e?"name"===e.id?t.length>=2?"":"Podaj imię i nazwisko (min. 2 znaki).":"email"===e.id?h.test(t)?"":"Wpisz poprawny adres e-mail.":"message"===e.id?t.length>=10?"":"Wiadomość powinna mieć co najmniej 10 znaków.":"":""}function w(e,t){var n=e?a("#error-"+e.id):null;n&&(n.textContent=t||""),e&&(t?(e.setAttribute("aria-invalid","true"),e.classList.add("is-invalid")):(e.removeAttribute("aria-invalid"),e.classList.remove("is-invalid")))}function A(e,t){if(!e)return!0;var n=e.value.trim(),r=b(e,n);return t&&w(e,r),!r}function E(){if(f){var e=0;m.forEach(function(t){A(t,!1)&&e++});var t=m.length-e;if(t<=0)f.textContent="Formularz gotowy do wysłania.";else{var n,r,i,a,o,c,l=(r="pole",i="pola",a="pól",o=(n=t)%10,c=n%100,1===n?r:o>=2&&o<=4&&!(c>=12&&c<=14)?i:a);f.textContent="Uzupełnij "+t+" "+l+", aby wysłać."}}}m.forEach(function(e){e.addEventListener("blur",function(){e.dataset.touched="true",A(e,!0),E()}),e.addEventListener("input",function(){"true"===e.dataset.touched&&A(e,!0),E()})}),E(),i.addEventListener("submit",function(e){if(e.preventDefault(),m.length){var t,n,r,a=(t=!0,n=null,r=!0,m.forEach(function(e){var i=A(e,t||"true"===e.dataset.touched);i||n||(n=e),r=r&&i}),{valid:r,firstInvalid:n});if(!a.valid)return s&&(s.classList.remove("visually-hidden"),s.textContent="Uzupełnij poprawnie wyróżnione pola."),void(a.firstInvalid&&a.firstInvalid.focus());s&&(s.classList.remove("visually-hidden"),s.textContent="Wysyłanie…"),setTimeout(function(){s&&(s.textContent="Dziękujemy! Wiadomość została wysłana."),i.reset(),m.forEach(function(e){e.dataset.touched="",w(e,"")}),E()},800)}})}var v=a(".site-header");if(v){var p=!1,g=null,y=function(){var e=window.scrollY>8;e!==g&&(v.classList.toggle("is-scrolled",e),g=e),p=!1};y(),window.addEventListener("scroll",function(){p||(p=!0,window.requestAnimationFrame(y))},{passive:!0})}renderFeaturedMenu().then(function(e){e&&"function"==typeof window.initReveal&&window.initReveal()}),initReveal(),d()})}(),document.addEventListener("DOMContentLoaded",function(){initScrollspy({pageClass:"page--gallery",ids:["wnetrza","dania","desery","napoje"],listSelector:'.gallery-tabs__list a[href^="#"]',stickySelector:".gallery-tabs",bottomPercent:"-55%",bottomPercentMobile:"-65%"})}),function(){const e=document.documentElement;if(!document.querySelector(".gallery__link"))return;let t=document.querySelector(".lb-overlay");if(!t){t=document.createElement("div"),t.className="lb-overlay",t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),t.setAttribute("aria-label","Podgląd zdjęcia");const e=document.createElement("div");e.className="lb-modal";const n=document.createElement("figure");n.className="lb-figure";const r=document.createElement("img");r.alt="",r.decoding="async",r.loading="eager";const i=document.createElement("figcaption");i.className="lb-caption";const a=document.createElement("div");a.className="lb-controls";const o=document.createElement("button");o.type="button",o.className="lb-btn lb-prev",o.setAttribute("aria-label","Poprzednie zdjęcie"),o.textContent="←";const c=document.createElement("span");c.className="lb-counter",c.textContent="1/1";const l=document.createElement("button");l.type="button",l.className="lb-btn lb-next",l.setAttribute("aria-label","Następne zdjęcie"),l.textContent="→";const u=document.createElement("button");u.type="button",u.className="lb-btn lb-full",u.setAttribute("aria-label","Pełny ekran"),u.textContent="⤢";const s=document.createElement("button");s.type="button",s.className="lb-btn lb-close",s.setAttribute("aria-label","Zamknij podgląd"),s.textContent="×",a.append(o,c,l,u,s);try{o.textContent="←",l.textContent="→",s.textContent="×",o.setAttribute("aria-label","Poprzednie zdjęcie"),o.setAttribute("title","Poprzednie zdjęcie"),l.setAttribute("aria-label","Następne zdjęcie"),l.setAttribute("title","Następne zdjęcie"),u.setAttribute("aria-label","Pełny ekran"),u.setAttribute("title","Pełny ekran"),s.setAttribute("aria-label","Zamknij podgląd"),s.setAttribute("title","Zamknij podgląd"),i.id="lb-caption",t.setAttribute("aria-label","Podgląd zdjęcia"),t.setAttribute("aria-describedby","lb-caption"),t.setAttribute("aria-keyshortcuts","Esc ArrowLeft ArrowRight F")}catch(e){}const d=document.createElement("div");d.className="visually-hidden",d.id="lb-live",d.setAttribute("aria-live","polite"),n.append(r,i),e.append(n,a,d),t.append(e),document.body.appendChild(t)}const n=t.querySelector("img"),r=t.querySelector(".lb-caption"),i=t.querySelector(".lb-close"),a=t.querySelector(".lb-prev"),o=t.querySelector(".lb-next"),c=t.querySelector(".lb-full"),l=t.querySelector(".lb-counter"),u=t.querySelector("#lb-live"),s=Array.prototype.slice.call(document.querySelectorAll("header, main, footer"));function d(e){s.forEach(function(t){if(t)if(e){try{t.setAttribute("inert","")}catch(e){}t.setAttribute("aria-hidden","true")}else{try{t.removeAttribute("inert")}catch(e){}t.removeAttribute("aria-hidden")}})}c&&!c.getAttribute("title")&&c.setAttribute("title","Pełny ekran (F)");let f=[],m=0,h=null;function v(){if(!n||!a||!o)return;const e=n.getBoundingClientRect();if(!e||!e.height)return;const t=e.top+e.height/2;a.style.top=t+"px",o.style.top=t+"px"}function p(e){const t=f[e];t&&(n.classList.remove("is-ready"),n.onload=function(){n.classList.add("is-ready"),v()},n.src=t.getAttribute("href"),r.textContent=function(e){if(!e)return"";const t=e.getAttribute("data-lb-caption");if(t)return t.trim();const n=e.querySelector("figcaption");if(n&&n.textContent.trim())return n.textContent.trim();const r=e.querySelector("img");return r&&r.alt.trim()?r.alt.trim():""}(t)||"",l.textContent=m+1+"/"+f.length,u&&(u.textContent="Obraz "+(m+1)+" z "+f.length),function(e){[f[e+1],f[e-1]].forEach(e=>{e&&((new Image).src=e.getAttribute("href"))})}(e),requestAnimationFrame(v))}function g(){e.classList.remove("lb-open"),n.removeAttribute("src"),h&&h.focus(),document.fullscreenElement&&document.exitFullscreen().catch(()=>{}),d(!1)}function y(){m=(m+1)%f.length,p(m)}function b(){m=(m-1+f.length)%f.length,p(m)}t.addEventListener("click",e=>{e.target}),document.addEventListener("keydown",n=>{if(e.classList.contains("lb-open"))if("Escape"!==n.key)if("ArrowRight"!==n.key&&"PageDown"!==n.key){if("ArrowLeft"!==n.key&&"PageUp"!==n.key)return"Home"===n.key?(m=0,void p(m)):"End"===n.key?(m=f.length-1,void p(m)):void("f"===n.key.toLowerCase()&&(document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():t.requestFullscreen&&t.requestFullscreen()));b()}else y();else g()}),window.addEventListener("resize",v),window.addEventListener("orientationchange",v),document.addEventListener("fullscreenchange",v);let w=0,A=0,E=0;t.addEventListener("touchstart",function(e){if(!e.changedTouches||!e.changedTouches.length)return;const t=e.changedTouches[0];w=t.clientX,A=t.clientY,E=Date.now()},{passive:!0}),t.addEventListener("touchend",function(e){if(!e.changedTouches||!e.changedTouches.length)return;const t=e.changedTouches[0],n=t.clientX-w,r=t.clientY-A,i=Date.now()-E;Math.abs(n)>40&&Math.abs(n)>Math.abs(r)&&i<600&&(n<0?y():b())},{passive:!0}),document.addEventListener("fullscreenchange",function(){e.classList.toggle("is-fullscreen",!!document.fullscreenElement)}),function(){let e=null;t.addEventListener("mousemove",function(n){const r=n.clientY-t.getBoundingClientRect().top;e&&cancelAnimationFrame(e),e=requestAnimationFrame(()=>function(e){if(document.fullscreenElement)return;t.classList.toggle("lb-topzone",e<=96)}(r))}),t.addEventListener("mouseleave",function(){t.classList.remove("lb-topzone")})}(),t.addEventListener("keydown",e=>{if("Tab"!==e.key)return;const n=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!n.length)return;const r=n[0],i=n[n.length-1];e.shiftKey&&document.activeElement===r?(i.focus(),e.preventDefault()):e.shiftKey||document.activeElement!==i||(r.focus(),e.preventDefault())}),i.addEventListener("click",g),a.addEventListener("click",b),o.addEventListener("click",y),c.addEventListener("click",function(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():t.requestFullscreen&&t.requestFullscreen()}),document.addEventListener("click",t=>{const n=t.target.closest(".gallery__link");if(!n)return;n.getAttribute("href")&&(t.preventDefault(),function(t){h=t;const n=t.getAttribute("data-lightbox")||"gallery";f=Array.prototype.slice.call(document.querySelectorAll(".gallery__link"+(n?'[data-lightbox="'+n+'"]':""))),m=Math.max(0,f.indexOf(t)),e.classList.add("lb-open"),p(m),requestAnimationFrame(()=>i.focus()),d(!0)}(n))})}(),"undefined"!=typeof window&&(window.initReveal=initReveal);var FALLBACK_IMAGE="data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="960" height="640" viewBox="0 0 960 640"><rect width="960" height="640" fill="#f3ede3"/><rect x="18" y="18" width="924" height="604" fill="none" stroke="#e2d6c3" stroke-width="2"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#6b1e2f" font-family="sans-serif" font-size="24">Brak obrazu</text></svg>');function initImageFallbacks(e){(e||document).querySelectorAll(".menu-card__figure img, .gallery__img").forEach(function(e){e.dataset.fallbackBound||(e.dataset.fallbackBound="true",e.addEventListener("error",function(){e.dataset.fallbackApplied||(e.dataset.fallbackApplied="true",e.classList.add("img-fallback"),e.removeAttribute("srcset"),e.removeAttribute("sizes"),e.src=FALLBACK_IMAGE)}))})}var menuDataPromise=null;function fetchMenuDataOnce(){return menuDataPromise||(menuDataPromise=fetch("data/menu.json",{cache:"no-store"}).then(function(e){if(!e.ok)throw new Error("menu.json load failed");return e.json()}).then(function(e){return e&&Array.isArray(e.items)?e.items:[]}).catch(function(){return[]}))}var MENU_CARD_SIZES="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw";function buildMenuPictureMarkup(e,t){if(!e)return"";var n=(t=t||{}).loading||"lazy",r=t.fetchpriority?' fetchpriority="high"':"",i=e.sizes||MENU_CARD_SIZES,a=Array.isArray(e.variants)?e.variants:[],o=e.basePath||"",c=e.category||"",l=e.slug||"";if(!a.length)return"";var u=["avif","webp","jpg","png"],s=[];function d(e){return a.filter(function(t){return Array.isArray(t.formats)&&-1!==t.formats.indexOf(e)}).map(function(t){return o+"/"+c+"/"+l+"-"+t.width+"x"+t.height+"."+e+" "+t.width+"w"}).join(", ")}a.forEach(function(e){(e.formats||[]).forEach(function(e){-1===s.indexOf(e)&&s.push(e)})}),s.sort(function(e,t){return u.indexOf(e)-u.indexOf(t)});var f="jpg";-1===s.indexOf(f)&&(f=s[0]||"jpg");var m=a.filter(function(e){return Array.isArray(e.formats)&&-1!==e.formats.indexOf(f)}),h=(m.length?m:a).reduce(function(e,t){return!e||t.width>e.width?t:e},null),v=o+"/"+c+"/"+l+"-"+h.width+"x"+h.height+"."+f;return"<picture>"+s.filter(function(e){return e!==f}).map(function(e){var t=d(e);return t?'<source type="image/'+e+'" srcset="'+t+'" sizes="'+i+'" />':""}).join("")+'<img class="card__image" src="'+v+'" srcset="'+d(f)+'" sizes="'+i+'" alt="'+(e.alt||"")+'" loading="'+n+'"'+r+' decoding="async" width="'+h.width+'" height="'+h.height+'" /></picture>'}function buildMenuCardMarkup(e,t){if(!e)return"";var n=(t=t||{}).loading||"lazy",r=t.fetchpriority,i=e.image||{},a=(Array.isArray(e.tags)&&e.tags.length?e.tags:[]).map(function(e){return'<li class="menu-card__tag">'+e+"</li>"}).join(""),o=i.figcaption?'<figcaption class="visually-hidden">'+i.figcaption+"</figcaption>":"";return'<li class="card menu-card" data-reveal><article><figure class="menu-card__figure">'+buildMenuPictureMarkup(i,{loading:n,fetchpriority:r})+o+'</figure><div class="card__body"><div class="menu-card__heading"><h3 class="card__title">'+e.title+'</h3><span class="menu-card__price">'+e.price+'</span></div><p class="card__text">'+e.description+"</p>"+(a?'<ul class="menu-card__tags">'+a+"</ul>":"")+"</div></article></li>"}function renderFeaturedMenu(){var e=document.querySelector('[data-menu-featured="true"]');return e?fetchMenuDataOnce().then(function(t){if(!t.length)return!1;var n=[];["przystawki","dania-glowne","desery"].forEach(function(e){var r=t.find(function(t){return t.category===e});r&&n.push(r)}),n.length<3&&(n=t.slice(0,3));var r=n.map(function(e,t){return buildMenuCardMarkup(e,{loading:0===t?"eager":"lazy",fetchpriority:0===t})}).join("");return!!r&&(e.innerHTML=r,initImageFallbacks(e),!0)}):Promise.resolve(!1)}function renderMenuByCategory(){var e=Array.prototype.slice.call(document.querySelectorAll("[data-menu-category]"));return e.length?fetchMenuDataOnce().then(function(t){if(!t.length)return!1;var n=!0;return e.forEach(function(e){var r=e.getAttribute("data-menu-category");if(r){var i=t.filter(function(e){return e.category===r});if(i.length){var a=i.map(function(e,t){var r=n;return n=!1,buildMenuCardMarkup(e,{loading:r?"eager":"lazy",fetchpriority:r})}).join("");a&&(e.innerHTML=a),a&&initImageFallbacks(e)}}}),!0}):Promise.resolve(!1)}document.addEventListener("DOMContentLoaded",function(){document.body&&document.body.classList.contains("page--menu")&&(initScrollspy({pageClass:"page--menu",ids:["przystawki","dania-glowne","zupy","kuchnia-szefa","desery","drinki"],listSelector:'.menu-tabs__list a[href^="#"]',stickySelector:".menu-navigation",topPercent:"-40%",bottomPercent:"-55%",bottomPercentMobile:"-65%"}),renderMenuByCategory().then(function(e){!function(){var e=document.getElementById("menu-search"),t=document.querySelector(".menu-filters .filters");if(e&&t){var n=Array.prototype.slice.call(t.querySelectorAll("button[data-filter]")),r=Array.prototype.slice.call(document.querySelectorAll(".menu-card")),i=document.querySelector(".filters__empty");r.forEach(function(e){var t=Array.prototype.slice.call(e.querySelectorAll(".menu-card__tag")).map(function(e){return(e.textContent||"").trim()}).filter(Boolean);e.setAttribute("data-tags",t.join(","))});var a,o,c="*",l="",u=null;e.addEventListener("input",(a=function(){l=e.value||"",d()},o=200,function(){var e=arguments;clearTimeout(u),u=setTimeout(function(){a.apply(null,e)},o)})),t.addEventListener("click",function(e){var t=e.target.closest("button[data-filter]");t&&(n.forEach(function(e){e.classList.toggle("is-active",e===t)}),c=t.getAttribute("data-filter")||"*",d())}),d()}function s(e){return(e||"").toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function d(){var e=0,t=s(l);r.forEach(function(n){var r=n.querySelector(".card__title"),i=n.querySelector(".card__text"),a=s((r&&r.textContent)+" "+(i&&i.textContent)),o=!t||-1!==a.indexOf(t),l=(n.getAttribute("data-tags")||"").split(",").map(function(e){return e.trim()}),u="*"===c||-1!==l.indexOf(c),d=o&&u;n.style.display=d?"":"none",d&&e++}),i&&(i.hidden=0!==e,0===e&&(i.textContent="Brak pozycji spełniających kryteria."))}}(),Array.prototype.slice.call(document.querySelectorAll(".menu-card__price")).forEach(function(e){var t=(e.textContent||"").trim(),n=t.match(/[0-9]+(?:[\.,][0-9]+)?/),r=n?n[0]:t;e.setAttribute("aria-label",r+" złotych")}),Array.prototype.slice.call(document.querySelectorAll(".menu-card")).forEach(function(e){var t=e.querySelector("figure"),n=t?t.querySelector("img"):null,r=e.querySelector(".card__title"),i=e.querySelector(".card__text");if(t){var a=r?r.textContent.trim():"",o=i?i.textContent.trim():"";n&&a&&(n.alt=a);var c=t.querySelector("figcaption"),l=a+(o?". "+o:"")+" — alergeny: wg obsługi.";if(c)c.textContent=l,c.classList.add("visually-hidden");else{var u=document.createElement("figcaption");u.className="visually-hidden",u.textContent=l,t.appendChild(u)}}}),function(){function e(e){if(e){var t,n=e.getAttribute("id");if(n||(t=e.textContent,(n=(t||"").toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"))&&e.setAttribute("id",n)),n&&!e.querySelector(".anchor")){var r=document.createElement("a");r.className="anchor",r.href="#"+n,r.setAttribute("aria-label","Kopiuj link do tego elementu"),r.addEventListener("click",function(e){e.preventDefault();var t=location.origin+location.pathname+"#"+n;if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(t).then(function(){r.setAttribute("aria-label","Skopiowano link"),setTimeout(function(){r.setAttribute("aria-label","Kopiuj link do tego elementu")},1e3)});else{var i=document.createElement("input");i.value=t,document.body.appendChild(i),i.select();try{document.execCommand("copy")}catch(e){}document.body.removeChild(i)}"undefined"!=typeof history&&history.replaceState&&history.replaceState(null,"","#"+n)}),e.appendChild(r)}}}document.querySelectorAll(".menu-section__header h2").forEach(e),document.querySelectorAll(".card__title").forEach(e)}(),e&&"function"==typeof window.initReveal&&window.initReveal()}))});

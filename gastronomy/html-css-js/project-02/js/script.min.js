"use strict";function initScrollspy(e){if(e&&e.pageClass&&e.ids&&e.listSelector&&(document.body&&document.body.classList.contains(e.pageClass))){var t=Array.prototype.slice.call(document.querySelectorAll(e.listSelector));if(t.length){var n=Object.create(null);t.forEach(function(e){var t=(e.getAttribute("href")||"").replace(/^#/,"");t&&(n[t]=e)});var r=t.length?t[0].closest("ul"):null;r&&r.addEventListener("click",function(e){var t=e.target.closest('a[href^="#"]');if(t){var n=(t.getAttribute("href")||"").replace(/^#/,"");n&&(y(n),"undefined"!=typeof history&&"function"==typeof history.replaceState&&history.replaceState(null,"","#"+n))}}),y(e.ids[0]);var i=document.querySelector(".site-header"),o=e.stickySelector?document.querySelector(e.stickySelector):null,a=i?i.offsetHeight:64,c=o?o.offsetHeight:0,l="function"==typeof window.matchMedia&&window.matchMedia("(max-width: 640px)").matches,u=e.topPercent?e.topPercent:-(a+c+10)+"px",s=l?e.bottomPercentMobile||"-65%":e.bottomPercent||"-55%";if("function"==typeof IntersectionObserver){var d=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target.getAttribute("id");t&&y(t)}})},{root:null,rootMargin:u+" 0px "+s+" 0px",threshold:.01});e.ids.forEach(function(e){var t=document.getElementById(e);t&&d.observe(t)})}else{var f=(location.hash||"").replace(/^#/,"");y(f&&n[f]?f:e.ids[0])}window.addEventListener("hashchange",function(){var e=(location.hash||"").replace(/^#/,"");e&&n[e]&&y(e)});var m=!1;window.addEventListener("scroll",h,{passive:!0}),window.addEventListener("resize",h),setTimeout(p,0)}}function y(e){t.forEach(function(t){(t.getAttribute("href")||"").replace(/^#/,"")===e?(t.classList.add("is-active"),t.setAttribute("aria-current","true")):(t.classList.remove("is-active"),t.removeAttribute("aria-current"))})}function p(){a=i?i.offsetHeight:64,c=o?o.offsetHeight:0;for(var t=window.scrollY+a+c+8,n=e.ids[0],r=0;r<e.ids.length;r++){var l=document.getElementById(e.ids[r]);if(l)l.getBoundingClientRect().top+window.scrollY<=t&&(n=e.ids[r])}y(n)}function h(){m||(m=!0,requestAnimationFrame(function(){p(),m=!1}))}}function initReveal(){var e=Array.prototype.slice.call(document.querySelectorAll("[data-reveal]"));if(e.length){var t="function"==typeof window.matchMedia?window.matchMedia("(prefers-reduced-motion: reduce)"):null,n=!!t&&t.matches,r="function"==typeof window.IntersectionObserver,i=null,o=function(e){e.classList.add("is-visible")};if(e.forEach(function(e){e.classList.add("reveal")}),document.querySelectorAll("[data-reveal-group]").forEach(function(e){e.querySelectorAll("[data-reveal]").forEach(function(e,t){e.style.setProperty("--reveal-delay",(80*t).toString()+"ms")})}),r&&!n){if(i=new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting&&(o(e.target),t.unobserve(e.target))})},{root:null,rootMargin:"0px 0px -10% 0px",threshold:.15}),e.forEach(function(e){!function(e){var t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight||0;return t.top<=.9*n&&t.bottom>=0}(e)?i.observe(e):o(e)}),t){var a=function(t){t.matches&&i&&(i.disconnect(),e.forEach(o))};"function"==typeof t.addEventListener?t.addEventListener("change",a):"function"==typeof t.addListener&&t.addListener(a)}}else e.forEach(o)}}!function(){var e=document.documentElement,t="kp-theme",n=null,r="undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null,i=!1;function o(e){return"string"==typeof e?document.querySelector(e):e||null}function a(e,t){e.setAttribute("aria-expanded",String(t));var n=o("#primary-nav");n&&n.setAttribute("data-open",String(t))}function c(r,a){a=a||{};var c="dark"===r?"dark":"light";e.setAttribute("data-theme",c),function(e){var t=o(".theme-toggle");if(t){var n="dark"===e;t.setAttribute("aria-pressed",String(n));var r=n?"Przełącz na tryb jasny":"Przełącz na tryb ciemny";t.setAttribute("aria-label",r);var i=t.querySelector(".visually-hidden");i&&(i.textContent=r)}}(c),function(e){n||(n=document.querySelector('meta[name="theme-color"]')),n&&n.setAttribute("content","dark"===e?"#181210":"#f8f1e7")}(c),a.persist&&function(e){try{localStorage.setItem(t,e),i=!0}catch(e){}}(c),a.silent||function(e){"undefined"!=typeof window&&"function"==typeof window.CustomEvent&&window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:e}}))}(c)}function l(){var n=o(".theme-toggle");if(n){var a=function(){try{var e=localStorage.getItem(t);return"dark"===e||"light"===e?e:null}catch(e){return null}}();a&&(i=!0);var l=a||e.getAttribute("data-theme");if(!l&&r&&"boolean"==typeof r.matches&&(l=r.matches?"dark":"light"),c(l||"light",{silent:!0}),n.addEventListener("click",function(){c("dark"===("dark"===e.getAttribute("data-theme")?"dark":"light")?"light":"dark",{persist:!0})}),r){var u=function(e){i||c(e.matches?"dark":"light")};"function"==typeof r.addEventListener?r.addEventListener("change",u):"function"==typeof r.addListener&&r.addListener(u)}}}"undefined"!=typeof window&&(window.initThemeToggle=l),document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("year");e&&(e.textContent=String((new Date).getFullYear()));var t=o(".nav-toggle");t&&t.addEventListener("click",function(){var e="true"===t.getAttribute("aria-expanded");a(t,!e);var n=!e;t.setAttribute("aria-label",n?"Zamknij menu":"Otwórz menu")}),document.addEventListener("keyup",function(e){"Escape"===e.key&&t&&"true"===t.getAttribute("aria-expanded")&&a(t,!1)}),document.querySelectorAll('a[href^="#"]').forEach(function(e){e.addEventListener("click",function(t){var n=e.getAttribute("href");if(n&&"#"!==n){var r=document.querySelector(n);r&&(t.preventDefault(),r.scrollIntoView({behavior:"smooth",block:"start"}),r.setAttribute("tabindex","-1"),r.focus({preventScroll:!0}))}})});var n=o(".form"),r=o("#form-status");n&&n.addEventListener("submit",function(e){e.preventDefault();var t=n.querySelector("#name"),i=n.querySelector("#email"),o=n.querySelector("#message");t&&i&&o&&(r&&(r.classList.remove("visually-hidden"),r.textContent="Wysyłanie…"),setTimeout(function(){var e=t.value.trim(),a=i.value.trim(),c=o.value.trim();e&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)&&c?(r&&(r.textContent="Dziękujemy! Wiadomość została wysłana."),n.reset()):r&&(r.textContent="Wpisz poprawne imię, e‑mail i wiadomość.")},800))}),initReveal(),l()})}(),document.addEventListener("DOMContentLoaded",function(){initScrollspy({pageClass:"page-gallery",ids:["wnetrza","dania","desery","napoje"],listSelector:'.gallery-tabs__list a[href^="#"]',stickySelector:".gallery-tabs",bottomPercent:"-55%",bottomPercentMobile:"-65%"})}),function(){const e=document.documentElement;let t=document.querySelector(".lb-overlay");if(!t){t=document.createElement("div"),t.className="lb-overlay",t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),t.setAttribute("aria-label","Podgląd zdjęcia");const e=document.createElement("div");e.className="lb-modal";const n=document.createElement("figure");n.className="lb-figure";const r=document.createElement("img");r.alt="",r.decoding="async",r.loading="eager";const i=document.createElement("figcaption");i.className="lb-caption";const o=document.createElement("div");o.className="lb-controls";const a=document.createElement("button");a.type="button",a.className="lb-btn lb-prev",a.setAttribute("aria-label","Poprzednie zdjęcie"),a.textContent="←";const c=document.createElement("span");c.className="lb-counter",c.textContent="1/1";const l=document.createElement("button");l.type="button",l.className="lb-btn lb-next",l.setAttribute("aria-label","Następne zdjęcie"),l.textContent="→";const u=document.createElement("button");u.type="button",u.className="lb-btn lb-full",u.setAttribute("aria-label","Pełny ekran"),u.textContent="⤢";const s=document.createElement("button");s.type="button",s.className="lb-btn lb-close",s.setAttribute("aria-label","Zamknij podgląd"),s.textContent="×",o.append(a,c,l,u,s);try{a.textContent="←",l.textContent="→",s.textContent="×",a.setAttribute("aria-label","Poprzednie zdjęcie"),a.setAttribute("title","Poprzednie zdjęcie"),l.setAttribute("aria-label","Następne zdjęcie"),l.setAttribute("title","Następne zdjęcie"),u.setAttribute("aria-label","Pełny ekran"),u.setAttribute("title","Pełny ekran"),s.setAttribute("aria-label","Zamknij podgląd"),s.setAttribute("title","Zamknij podgląd"),i.id="lb-caption",t.setAttribute("aria-label","Podgląd zdjęcia"),t.setAttribute("aria-describedby","lb-caption"),t.setAttribute("aria-keyshortcuts","Esc ArrowLeft ArrowRight F")}catch(e){}const d=document.createElement("div");d.className="visually-hidden",d.id="lb-live",d.setAttribute("aria-live","polite"),n.append(r,i),e.append(n,o,d),t.append(e),document.body.appendChild(t)}const n=t.querySelector("img"),r=t.querySelector(".lb-caption"),i=t.querySelector(".lb-close"),o=t.querySelector(".lb-prev"),a=t.querySelector(".lb-next"),c=t.querySelector(".lb-full"),l=t.querySelector(".lb-counter"),u=t.querySelector("#lb-live"),s=Array.prototype.slice.call(document.querySelectorAll("header, main, footer"));function d(e){s.forEach(function(t){if(t)if(e){try{t.setAttribute("inert","")}catch(e){}t.setAttribute("aria-hidden","true")}else{try{t.removeAttribute("inert")}catch(e){}t.removeAttribute("aria-hidden")}})}c&&!c.getAttribute("title")&&c.setAttribute("title","Pełny ekran (F)");let f=[],m=0,y=null;function p(){if(!n||!o||!a)return;const e=n.getBoundingClientRect();if(!e||!e.height)return;const t=e.top+e.height/2;o.style.top=t+"px",a.style.top=t+"px"}function h(e){const t=f[e];t&&(n.classList.remove("is-ready"),n.onload=function(){n.classList.add("is-ready"),p()},n.src=t.getAttribute("href"),r.textContent=function(e){if(!e)return"";const t=e.getAttribute("data-lb-caption");if(t)return t.trim();const n=e.querySelector("figcaption");if(n&&n.textContent.trim())return n.textContent.trim();const r=e.querySelector("img");return r&&r.alt.trim()?r.alt.trim():""}(t)||"",l.textContent=m+1+"/"+f.length,u&&(u.textContent="Obraz "+(m+1)+" z "+f.length),function(e){[f[e+1],f[e-1]].forEach(e=>{e&&((new Image).src=e.getAttribute("href"))})}(e),requestAnimationFrame(p))}function b(){e.classList.remove("lb-open"),n.removeAttribute("src"),y&&y.focus(),document.fullscreenElement&&document.exitFullscreen().catch(()=>{}),d(!1)}function g(){m=(m+1)%f.length,h(m)}function v(){m=(m-1+f.length)%f.length,h(m)}t.addEventListener("click",e=>{e.target}),document.addEventListener("keydown",n=>{if(e.classList.contains("lb-open"))if("Escape"!==n.key)if("ArrowRight"!==n.key&&"PageDown"!==n.key){if("ArrowLeft"!==n.key&&"PageUp"!==n.key)return"Home"===n.key?(m=0,void h(m)):"End"===n.key?(m=f.length-1,void h(m)):void("f"===n.key.toLowerCase()&&(document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():t.requestFullscreen&&t.requestFullscreen()));v()}else g();else b()}),window.addEventListener("resize",p),window.addEventListener("orientationchange",p),document.addEventListener("fullscreenchange",p);let A=0,E=0,w=0;t.addEventListener("touchstart",function(e){if(!e.changedTouches||!e.changedTouches.length)return;const t=e.changedTouches[0];A=t.clientX,E=t.clientY,w=Date.now()},{passive:!0}),t.addEventListener("touchend",function(e){if(!e.changedTouches||!e.changedTouches.length)return;const t=e.changedTouches[0],n=t.clientX-A,r=t.clientY-E,i=Date.now()-w;Math.abs(n)>40&&Math.abs(n)>Math.abs(r)&&i<600&&(n<0?g():v())},{passive:!0}),document.addEventListener("fullscreenchange",function(){e.classList.toggle("is-fullscreen",!!document.fullscreenElement)}),function(){let e=null;t.addEventListener("mousemove",function(n){const r=n.clientY-t.getBoundingClientRect().top;e&&cancelAnimationFrame(e),e=requestAnimationFrame(()=>function(e){if(document.fullscreenElement)return;t.classList.toggle("lb-topzone",e<=96)}(r))}),t.addEventListener("mouseleave",function(){t.classList.remove("lb-topzone")})}(),t.addEventListener("keydown",e=>{if("Tab"!==e.key)return;const n=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!n.length)return;const r=n[0],i=n[n.length-1];e.shiftKey&&document.activeElement===r?(i.focus(),e.preventDefault()):e.shiftKey||document.activeElement!==i||(r.focus(),e.preventDefault())}),i.addEventListener("click",b),o.addEventListener("click",v),a.addEventListener("click",g),c.addEventListener("click",function(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():t.requestFullscreen&&t.requestFullscreen()}),document.addEventListener("click",t=>{const n=t.target.closest(".gallery__link");if(!n)return;n.getAttribute("href")&&(t.preventDefault(),function(t){y=t;const n=t.getAttribute("data-lightbox")||"gallery";f=Array.prototype.slice.call(document.querySelectorAll(".gallery__link"+(n?'[data-lightbox="'+n+'"]':""))),m=Math.max(0,f.indexOf(t)),e.classList.add("lb-open"),h(m),requestAnimationFrame(()=>i.focus()),d(!0)}(n))})}(),"undefined"!=typeof window&&(window.initReveal=initReveal),document.addEventListener("DOMContentLoaded",function(){document.body&&document.body.classList.contains("page--menu")&&(initScrollspy({pageClass:"page--menu",ids:["przystawki","dania-glowne","zupy","kuchnia-szefa","desery","drinki"],listSelector:'.menu-tabs__list a[href^="#"]',stickySelector:".menu-navigation",topPercent:"-40%",bottomPercent:"-55%",bottomPercentMobile:"-65%"}),function(){var e=document.getElementById("menu-search"),t=document.querySelector(".menu-filters .filters");if(e&&t){var n=Array.prototype.slice.call(t.querySelectorAll("button[data-filter]")),r=Array.prototype.slice.call(document.querySelectorAll(".menu-card")),i=document.querySelector(".filters__empty");r.forEach(function(e){var t=Array.prototype.slice.call(e.querySelectorAll(".menu-card__tag")).map(function(e){return(e.textContent||"").trim()}).filter(Boolean);e.setAttribute("data-tags",t.join(","))});var o,a,c="*",l="",u=null;e.addEventListener("input",(o=function(){l=e.value||"",d()},a=200,function(){var e=arguments;clearTimeout(u),u=setTimeout(function(){o.apply(null,e)},a)})),t.addEventListener("click",function(e){var t=e.target.closest("button[data-filter]");t&&(n.forEach(function(e){e.classList.toggle("is-active",e===t)}),c=t.getAttribute("data-filter")||"*",d())}),d()}function s(e){return(e||"").toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function d(){var e=0,t=s(l);r.forEach(function(n){var r=n.querySelector(".card__title"),i=n.querySelector(".card__text"),o=s((r&&r.textContent)+" "+(i&&i.textContent)),a=!t||-1!==o.indexOf(t),l=(n.getAttribute("data-tags")||"").split(",").map(function(e){return e.trim()}),u="*"===c||-1!==l.indexOf(c),d=a&&u;n.style.display=d?"":"none",d&&e++}),i&&(i.hidden=0!==e,0===e&&(i.textContent="Brak pozycji spełniających kryteria."))}}(),Array.prototype.slice.call(document.querySelectorAll(".menu-card__price")).forEach(function(e){var t=(e.textContent||"").trim(),n=t.match(/[0-9]+(?:[\.,][0-9]+)?/),r=n?n[0]:t;e.setAttribute("aria-label",r+" złotych")}),Array.prototype.slice.call(document.querySelectorAll(".menu-card")).forEach(function(e){var t=e.querySelector("figure"),n=t?t.querySelector("img"):null,r=e.querySelector(".card__title"),i=e.querySelector(".card__text");if(t){var o=r?r.textContent.trim():"",a=i?i.textContent.trim():"";n&&o&&(n.alt=o);var c=t.querySelector("figcaption"),l=o+(a?". "+a:"")+" — alergeny: wg obsługi.";if(c)c.textContent=l,c.classList.add("visually-hidden");else{var u=document.createElement("figcaption");u.className="visually-hidden",u.textContent=l,t.appendChild(u)}}}),function(){function e(e){if(e){var t,n=e.getAttribute("id");if(n||(t=e.textContent,(n=(t||"").toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"))&&e.setAttribute("id",n)),n&&!e.querySelector(".anchor")){var r=document.createElement("a");r.className="anchor",r.href="#"+n,r.setAttribute("aria-label","Kopiuj link do tego elementu"),r.addEventListener("click",function(e){e.preventDefault();var t=location.origin+location.pathname+"#"+n;if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(t).then(function(){r.setAttribute("aria-label","Skopiowano link"),setTimeout(function(){r.setAttribute("aria-label","Kopiuj link do tego elementu")},1e3)});else{var i=document.createElement("input");i.value=t,document.body.appendChild(i),i.select();try{document.execCommand("copy")}catch(e){}document.body.removeChild(i)}"undefined"!=typeof history&&history.replaceState&&history.replaceState(null,"","#"+n)}),e.appendChild(r)}}}document.querySelectorAll(".menu-section__header h2").forEach(e),document.querySelectorAll(".card__title").forEach(e)}())});
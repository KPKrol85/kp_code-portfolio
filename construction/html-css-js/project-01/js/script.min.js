const utils=(()=>{const e=document.documentElement,t=()=>{const e=document.querySelector('.site-header, header[role="banner"]');return e?Math.round(e.getBoundingClientRect().height):0},n=()=>{const n=(t=>{const n=getComputedStyle(e).getPropertyValue(t),i=parseFloat(n);return Number.isFinite(i)?i:0})("--header-h"),i=n>0?n:t();return i>0?i:74};let i=null,r=0;const o=()=>{const e=window.innerWidth||0;return null!=i&&e===r||(i=n(),r=e),i};let a=0;return window.addEventListener("resize",()=>{a||(a=requestAnimationFrame(()=>{a=0,i=null}))},{passive:!0}),Object.freeze({getHeaderH:o,refreshHeaderH:()=>(i=null,o()),syncHeaderCssVar:()=>{const t=n();return e.style.setProperty("--header-h",`${t}px`),i=t,t}})})();function initNav(){initNav._abort&&initNav._abort.abort();const e=new AbortController,{signal:t}=e;initNav._abort=e;const n=document.documentElement,i=document.querySelector(".nav-toggle"),r=document.querySelector("#navMenu");if(!i||!r)return;i.getAttribute("aria-controls")||i.setAttribute("aria-controls","navMenu");const o="pointerdown"in window?"pointerdown":"click";let a=null;const s=(e,{silentFocus:t=!1}={})=>{r.classList.toggle("open",e),n.classList.toggle("is-nav-open",e),i.setAttribute("aria-expanded",String(e)),i.setAttribute("aria-label",e?"Zamknij menu":"Otwórz menu"),window.dispatchEvent(new CustomEvent("nav:toggle",{detail:{open:e}})),t||(e?(a=document.activeElement,r.querySelector('a, button, [tabindex]:not([tabindex="-1"])')?.focus({preventScroll:!0})):((a||i).focus({preventScroll:!0}),a=null))};s(r.classList.contains("open"),{silentFocus:!0}),i.addEventListener("click",()=>s(!r.classList.contains("open")),{signal:t}),r.addEventListener("click",e=>{if(!e.target.closest('a[href^="#"]'))return;window.matchMedia("(max-width: 991.98px)").matches&&s(!1)},{signal:t}),document.addEventListener(o,e=>{r.classList.contains("open")&&(r.contains(e.target)||i.contains(e.target)||s(!1))},{capture:!0,passive:!0,signal:t}),document.addEventListener("keydown",e=>{if(r.classList.contains("open")){if("Escape"===e.key){const e=document.querySelector("#dd-oferta"),t=document.querySelector('.dropdown-trigger[href="#oferta"]'),n=document.activeElement;if(!(e&&t&&(e.contains(n)||t.contains(n))))return void s(!1)}if("Tab"===e.key){const t=r.querySelectorAll('a, button, input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!t.length)return;const n=t[0],i=t[t.length-1];e.shiftKey&&document.activeElement===n?(e.preventDefault(),i.focus()):e.shiftKey||document.activeElement!==i||(e.preventDefault(),n.focus())}}},{signal:t});const l=document.querySelector('.dropdown-trigger[href="#oferta"]'),c=document.querySelector("#dd-oferta");if(l&&c){let e=c.classList.contains("open");const n=window.matchMedia("(min-width: 992px)"),a=l.closest(".has-dropdown")||l.parentElement;l.setAttribute("aria-expanded",String(e)),l.setAttribute("aria-haspopup","true"),l.getAttribute("aria-controls")||l.setAttribute("aria-controls","dd-oferta");const s=()=>{c.querySelector('a, button, [tabindex]:not([tabindex="-1"])')?.focus({preventScroll:!0})},d=(t,{returnFocus:n=!1,focusFirst:i=!1}={})=>{c.classList.toggle("open",t),l.setAttribute("aria-expanded",String(t)),e=t,t&&i?s():!t&&n&&l.focus({preventScroll:!0})};a&&(a.addEventListener("mouseenter",()=>{n.matches&&d(!0)},{signal:t}),a.addEventListener("mouseleave",()=>{n.matches&&d(!1)},{signal:t}));const u=()=>!!window.matchMedia("(max-width: 991.98px)").matches&&(!e&&(d(!0,{focusFirst:!0}),!0));l.addEventListener("click",e=>{u()&&e.preventDefault()},{signal:t}),l.addEventListener("keydown",e=>{const t="Enter"===e.key,n=" "===e.key||"Space"===e.code;(t||n)&&u()&&e.preventDefault()},{signal:t}),document.addEventListener(o,t=>{!e||c.contains(t.target)||l.contains(t.target)||d(!1,{returnFocus:!1})},{capture:!0,passive:!0,signal:t}),document.addEventListener("keydown",t=>{if("Escape"!==t.key||!e)return;const n=document.activeElement;n&&(c.contains(n)||l.contains(n))&&(t.preventDefault(),d(!1,{returnFocus:!0}))},{signal:t}),i.addEventListener("click",()=>{r.classList.contains("open")&&d(!1)},{signal:t});const m=()=>d(!1);n.addEventListener?n.addEventListener("change",m,{signal:t}):n.addListener(m)}}function initScrollSpy(){initScrollSpy._abort&&initScrollSpy._abort.abort();const e=new AbortController,{signal:t}=e;initScrollSpy._abort=e;const n=document.documentElement,i=document.querySelector(".site-header"),r=document.getElementById("navMenu"),o=[...document.querySelectorAll('.nav-menu a[href^="#"]')];if(!o.length)return;const a=e=>"#top"===e?"#strona-glowna":e,s=o.map(e=>a(e.getAttribute("href"))).filter(e=>e&&e.startsWith("#")&&e.length>1),l=[];document.querySelector("#oferta")&&l.push("#oferta");const c=[...new Set([...s,...l])].map(e=>document.querySelector(e)).filter(Boolean);if(!c.length)return;const d=()=>("function"==typeof utils?.getHeaderH?utils.getHeaderH():i?Math.round(i.getBoundingClientRect().height):0)+12,u=()=>r&&r.classList.contains("open")||n.classList.contains("is-nav-open")||document.body.classList.contains("nav-open")||document.documentElement.classList.contains("nav-open")||i&&i.classList.contains("open"),m=()=>{const e=d(),t=String(e);c.forEach(n=>{n.dataset.appliedScrollMargin!==t&&(n.style.scrollMarginTop=e+"px",n.dataset.appliedScrollMargin=t)})};let g=c[0].id;const p=e=>{g=e,o.forEach(t=>{const n=a(t.getAttribute("href"))==="#"+e;t.classList.toggle("is-active",n),n?t.setAttribute("aria-current","true"):t.removeAttribute("aria-current")});const t=document.querySelector('.dropdown-trigger[aria-controls="dd-oferta"]');if(t){const n="oferta"===e||e.startsWith("oferta-");t.classList.toggle("is-active",n),n?t.setAttribute("aria-current","true"):t.removeAttribute("aria-current")}},h=()=>{if(u())return;const e=(()=>{const e=d(),t=e+1,n=c.filter(e=>{const n=e.getBoundingClientRect();return n.top<=t&&n.bottom>t});if(n.length)return n[n.length-1].id;let i=c[0].id,r=-1/0;for(const t of c){const n=t.getBoundingClientRect().top-e;n<=0&&n>r&&(r=n,i=t.id)}return window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-2&&(i=c[c.length-1].id),i})();e!==g&&p(e)};let f=0;const v=()=>{if("onscrollend"in window){const e=()=>{h(),window.removeEventListener("scrollend",e)};window.addEventListener("scrollend",e,{signal:t})}else clearTimeout(f),f=setTimeout(h,120)};let b=!1;window.addEventListener("scroll",()=>{u()||(b||(b=!0,requestAnimationFrame(()=>{b=!1,h()})),v())},{passive:!0,signal:t});let y=0;const w=()=>{y||(y=requestAnimationFrame(()=>{y=0,m(),h()}))};window.addEventListener("resize",w,{passive:!0,signal:t}),window.addEventListener("nav:toggle",w,{signal:t});const L=window.matchMedia("(prefers-reduced-motion: reduce)").matches?"auto":"smooth";if(o.forEach(e=>{e.addEventListener("click",t=>{const o=e.getAttribute("href")||"",s=a(o);if(!s.startsWith("#"))return;t.preventDefault();const l=document.querySelector(s);if(!l)return;r?.classList.remove("open"),i?.classList.remove("open"),n.classList.remove("is-nav-open"),document.body.classList.remove("nav-open"),document.documentElement.classList.remove("nav-open"),window.dispatchEvent(new CustomEvent("nav:toggle",{detail:{open:!1}})),p(l.id);const c=d(),u=Math.max(0,window.scrollY+l.getBoundingClientRect().top-c);window.scrollTo({top:u,behavior:L}),history.pushState?history.pushState(null,"",s):location.hash=s,v()},{signal:t})}),r){const e=new MutationObserver(()=>{u()||v()});e.observe(r,{attributes:!0,attributeFilter:["class"]}),window.addEventListener("pagehide",()=>e.disconnect(),{once:!0,signal:t})}m(),h()}function initFooterYear(){const e=document.getElementById("year");if(!e)return;const t=String((new Date).getFullYear()),n=e.getAttribute("data-year-start");if(n&&/^\d{4}$/.test(n)&&n<t){const i=`${n}–${t}`;return void(e.textContent!==i&&(e.textContent=i))}e.textContent!==t&&(e.textContent=t)}function initSmoothTop(){initSmoothTop._abort&&initSmoothTop._abort.abort();const e=new AbortController,{signal:t}=e;initSmoothTop._abort=e;const n=window.matchMedia("(prefers-reduced-motion: reduce)").matches?"auto":"smooth";document.addEventListener("click",e=>{const t=e.target.closest('a[href="#top"], .scroll-top, [data-scroll="top"]');if(!t)return;if(!(e=>!(0!==e.button||e.defaultPrevented||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey))(e))return;if(t.getAttribute&&("_blank"===t.getAttribute("target")||t.hasAttribute("download")))return;e.preventDefault(),window.scrollTo({top:0,behavior:n});const i=document.getElementById("top");if(i&&"function"==typeof i.focus){const e=i.hasAttribute("tabindex");e||i.setAttribute("tabindex","-1"),i.focus({preventScroll:!0}),e||i.removeAttribute("tabindex")}history.pushState?history.pushState(null,"","#top"):location.hash="#top"},{signal:t})}function initSkipNext(){initSkipNext._abort&&initSkipNext._abort.abort();const e=new AbortController,{signal:t}=e;initSkipNext._abort=e;const n=window.matchMedia("(hover:none) and (pointer:coarse)").matches||window.innerWidth<=768,i=document.getElementById("skipNext"),r=document.getElementById("skipNextLive");if(!i)return;if(n)return i.remove(),void r?.remove();const o=["#oferta","#kontakt"].map(e=>document.querySelector(e)).filter(Boolean);if(!o.length)return i.remove(),void r?.remove();const a=document.querySelector(".site-header"),s=()=>("function"==typeof window.utils?.getHeaderH?window.utils.getHeaderH():Math.round(a?.getBoundingClientRect().height||0))+12,l=()=>{const e=(()=>{const e=s(),t=e+1;let n=-1;for(let i=0;i<o.length;i++){const r=o[i].getBoundingClientRect();if(r.top<=t&&r.bottom>t){n=i;break}r.top-e<=0&&(n=i)}return n})();return e<0?o[0]:0===e&&o[1]?o[1]:null},c=()=>{const e=l(),t=!e;i.classList.toggle("is-hidden",t),e&&(e=>{const t=(e=>{const t=(e?.id||"").toLowerCase();return"oferta"===t?"Oferta":"kontakt"===t?"Formularz":"kolejna sekcja"})(e);i.setAttribute("aria-label","Przejdź do: "+t),r&&(r.textContent="Następny: "+t)})(e)},d=window.matchMedia("(prefers-reduced-motion: reduce)").matches;i.addEventListener("click",e=>{e.preventDefault();const n=l();if(!n)return;const i=Math.max(0,window.scrollY+n.getBoundingClientRect().top-s());if(window.scrollTo({top:i,behavior:d?"auto":"smooth"}),"onscrollend"in window){const e=()=>{c(),window.removeEventListener("scrollend",e)};window.addEventListener("scrollend",e,{signal:t})}else setTimeout(c,120)},{signal:t});let u=!1;window.addEventListener("scroll",()=>{u||(u=!0,requestAnimationFrame(()=>{u=!1,c()}))},{passive:!0,signal:t});let m=0;window.addEventListener("resize",()=>{m||(m=requestAnimationFrame(()=>{m=0,c()}))},{passive:!0,signal:t}),c()}function initContactForm(){initContactForm._abort&&initContactForm._abort.abort();const e=new AbortController,{signal:t}=e;initContactForm._abort=e;const n=document.querySelector("section#kontakt .form");if(!n)return;const i=n.querySelector(".form-note"),r=n.querySelector('button[type="submit"]'),o=n.querySelector('input[name="website"]'),a=n.querySelector("#f-name"),s=n.querySelector("#f-phone"),l=n.querySelector("#f-msg"),c=n.querySelector("#f-consent");if(i&&(i.setAttribute("role","status"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),i.hasAttribute("tabindex")||i.setAttribute("tabindex","-1")),o){const e=o.closest("label, div")||o;Object.assign(e.style,{position:"absolute",left:"-9999px",width:"1px",height:"1px",overflow:"hidden"}),e.setAttribute("aria-hidden","true"),o.setAttribute("tabindex","-1"),o.setAttribute("autocomplete","off")}const d=Date.now(),u=e=>{n.setAttribute("aria-busy",e?"true":"false"),r&&(r.disabled=!!e)},m=(e,t=!1)=>{i&&(i.textContent=e||"",i.classList.toggle("is-ok",!!t),i.classList.toggle("is-err",!t&&!!e))},g=e=>{const t=(e.getAttribute("aria-describedby")||"").split(/\s+/).find(e=>e.endsWith("-error"));return t?document.getElementById(t):null},p=(e,t)=>{if(!e)return;e.setAttribute("aria-invalid","true"),e.setCustomValidity(t||"");const n=g(e);n&&(n.textContent=t||"",n.classList.toggle("visually-hidden",!t))},h=e=>{if(!e)return;e.removeAttribute("aria-invalid"),e.setCustomValidity("");const t=g(e);t&&(t.textContent="",t.classList.add("visually-hidden"))},f=e=>{const t=String(e||"").replace(/\D/g,"");return 9===t.length||!(11!==t.length||!t.startsWith("48"))},v=()=>{if(!s)return;const e=document.activeElement===s,t=s.value,n=(e=>{const t=(e=String(e||"")).trim().startsWith("+48");let n=e.replace(/\D/g,""),i="";return t&&(n.startsWith("48")&&(n=n.slice(2)),i="+48 "),n=n.slice(0,9),(i+[n.slice(0,3),n.slice(3,6),n.slice(6,9)].filter(Boolean).join(" ")).trim()})(t);n!==t&&(s.value=n,e&&s.setSelectionRange&&s.setSelectionRange(n.length,n.length))};n.addEventListener("input",e=>{const t=e.target;if(i?.textContent&&m("",!0),t.matches("input, textarea")&&h(t),t===s){v();const e=s.value.trim();(""===e||f(e))&&h(s)}},{signal:t}),s?.addEventListener("paste",()=>requestAnimationFrame(v),{signal:t}),s?.addEventListener("blur",v,{signal:t}),n.addEventListener("blur",e=>{const t=e.target;t.matches('input[type="text"], textarea')&&(t.value=t.value.trim())},!0,{signal:t}),n.addEventListener("reset",()=>{m("",!0),n.querySelectorAll('[aria-invalid="true"]').forEach(e=>h(e))},{signal:t});let b=!1;n.addEventListener("submit",e=>{if(e.preventDefault(),!b)if(o&&""!==o.value.trim()||Date.now()-d<2e3||(e=>{const t=String(e||"").toLowerCase();return(t.match(/https?:\/\//g)||[]).length>=2||/viagra|bitcoin|casino/.test(t)})(l?.value))n.reset();else{if(!n.checkValidity())return a&&a.validity.valueMissing?p(a,"Podaj imię i nazwisko (min. 2 znaki)."):a&&a.validity.tooShort&&p(a,"Imię i nazwisko powinno mieć co najmniej 2 znaki."),s&&s.validity.valueMissing&&p(s,"Podaj numer telefonu."),l&&l.validity.valueMissing?p(l,"Napisz krótki opis prac."):l&&l.validity.tooLong&&p(l,"Opis może mieć maksymalnie 1000 znaków."),c&&!c.checked&&p(c,"Wymagana zgoda na kontakt w celu wyceny."),n.reportValidity(),n.querySelector(':invalid, [aria-invalid="true"]')?.focus({preventScroll:!0}),void m("Uzupełnij poprawnie wszystkie pola i zaznacz zgodę.",!1);if(s){v();const e=s.value.trim();if(!f(e))return p(s,"Podaj poprawny numer (np. 600 700 800 lub +48 600 700 800)."),n.reportValidity(),s.focus({preventScroll:!0}),void m("Sprawdź format numeru telefonu.",!1);h(s)}b=!0,u(!0),m("Wysyłanie…",!0),setTimeout(()=>{u(!1),b=!1,n.querySelectorAll('[aria-invalid="true"]').forEach(e=>e.removeAttribute("aria-invalid")),n.reset(),m("Dziękujemy! Skontaktujemy się wkrótce.",!0),i?.focus?.()},900)}},{signal:t})}function initHeaderShrink(){initHeaderShrink._abort&&initHeaderShrink._abort.abort();const e=new AbortController,{signal:t}=e;initHeaderShrink._abort=e;const n=document.querySelector('.site-header, header[role="banner"]');if(!n)return;let i=!1,r=0;const o=()=>{const e=Math.round(n.getBoundingClientRect().height);return document.documentElement.style.setProperty("--header-h",`${e}px`),window.utils?.refreshHeaderH&&window.utils.refreshHeaderH(),window.dispatchEvent(new CustomEvent("header:sync",{detail:{height:e}})),e},a=e=>{e!==i?(i=e,n.classList.toggle("is-shrink",i),requestAnimationFrame(o)):requestAnimationFrame(o)},s=()=>{r||(r=requestAnimationFrame(()=>{r=0;const e=window.scrollY||0;!i&&e>16?a(!0):i&&e<4&&a(!1)}))},l=new ResizeObserver(()=>{requestAnimationFrame(o)});l.observe(n),document.fonts&&document.fonts.ready&&document.fonts.ready.then(()=>requestAnimationFrame(o)).catch(()=>{}),window.addEventListener("nav:toggle",()=>requestAnimationFrame(o),{signal:t}),window.addEventListener("pageshow",()=>requestAnimationFrame(o),{signal:t}),document.addEventListener("visibilitychange",()=>{document.hidden||requestAnimationFrame(o)},{signal:t}),window.addEventListener("scroll",s,{passive:!0,signal:t}),window.addEventListener("resize",()=>requestAnimationFrame(o),{passive:!0,signal:t}),t.addEventListener("abort",()=>{try{l.disconnect()}catch{}}),o(),s()}function initThemeToggle(){initThemeToggle._abort&&initThemeToggle._abort.abort();const e=new AbortController,{signal:t}=e;initThemeToggle._abort=e;const n=document.querySelector(".theme-toggle"),i=document.documentElement;if(!n||!i)return;const r="theme",o=window.matchMedia?.("(prefers-color-scheme: dark)"),a=(e,{persist:t=!1,silent:o=!1}={})=>{const a="dark"===e?"dark":"light";i.setAttribute("data-theme",a),n.setAttribute("aria-pressed",String("dark"===a));const s=(e=>"dark"===e?"Przełącz na jasny tryb":"Przełącz na ciemny tryb")(a);n.setAttribute("aria-label",s),n.setAttribute("title",s),t&&((e,t)=>{try{localStorage.setItem(e,t)}catch{}})(r,a),o||window.dispatchEvent(new CustomEvent("theme:change",{detail:{theme:a}}))},s=(e=>{try{return localStorage.getItem(e)}catch{return null}})(r),l=!!o&&o.matches,c=i.getAttribute("data-theme");if(a(s||c||(l?"dark":"light"),{persist:!!s,silent:!0}),n.addEventListener("click",()=>{const e="dark"===i.getAttribute("data-theme")?"dark":"light";a("dark"===e?"light":"dark",{persist:!0})},{signal:t}),o&&!s){const e=e=>a(e.matches?"dark":"light",{persist:!1});o.addEventListener?.("change",e,{signal:t}),o.addListener&&o.removeListener&&!o.addEventListener&&(o.addListener(e),t.addEventListener("abort",()=>o.removeListener(e)))}window.addEventListener("storage",e=>{if(e.key!==r)return;const t=e.newValue;"dark"===t||"light"===t?a(t,{persist:!1}):t||a(o&&o.matches?"dark":"light",{persist:!1})},{signal:t}),initThemeToggle.set=e=>{"dark"===e||"light"===e?a(e,{persist:!0}):((e=>{try{localStorage.removeItem(e)}catch{}})(r),o&&a(o.matches?"dark":"light",{persist:!1}))}}function initRipple(){initRipple._abort&&initRipple._abort.abort();const e=new AbortController,{signal:t}=e;initRipple._abort=e;const n=document.querySelector(".nav-menu li > a.btn.btn--sm");if(!n)return;const i=window.matchMedia?.("(prefers-reduced-motion: reduce)");if(!!i&&i.matches)return;const r=getComputedStyle(n);"static"===r.position&&(n.style.position="relative"),"hidden"!==r.overflow&&(n.style.overflow="hidden");const o=(e,i)=>{const r=n.getBoundingClientRect(),o=((e,t,n)=>{const i=t-e.left,r=n-e.top,o=e.right-t,a=e.bottom-n,s=Math.max(Math.hypot(i,r),Math.hypot(i,a),Math.hypot(o,r),Math.hypot(o,a));return Math.ceil(2*s)})(r,e,i);n.querySelector(".ripple")?.remove();const a=document.createElement("span");a.className="ripple",a.style.width=a.style.height=`${o}px`,a.style.left=e-r.left-o/2+"px",a.style.top=i-r.top-o/2+"px",n.appendChild(a);const s=()=>a.remove();a.addEventListener("animationend",s,{once:!0,signal:t}),setTimeout(()=>a.isConnected&&s(),1200)};n.addEventListener("pointerdown",e=>{(e=>!(0!==e.button||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey))(e)&&o(e.clientX,e.clientY)},{signal:t}),n.addEventListener("keydown",e=>{const t="Enter"===e.key,i=" "===e.key||"Space"===e.code;if(!t&&!i)return;const r=n.getBoundingClientRect();o(r.left+r.width/2,r.top+r.height/2),i&&(e.preventDefault(),n.click())},{signal:t}),i?.addEventListener&&i.addEventListener("change",e=>{e.matches&&initRipple._abort?.abort()},{signal:t})}function initHeroBlurSync(){initHeroBlurSync._abort&&initHeroBlurSync._abort.abort();const e=new AbortController,{signal:t}=e;initHeroBlurSync._abort=e;const n=document.querySelector(".hero-bg img"),i=document.querySelector(".hero__bg-blur");if(!n||!i)return;const r=n.closest("picture")||null;let o=0,a=0,s="";const l=()=>{if(!n.isConnected||!i.isConnected)return;const e=n.currentSrc||n.src||"";e&&(e=>{const t=`url("${e}")`;t!==s&&(i.style.backgroundImage=t,s=t,window.dispatchEvent(new CustomEvent("hero:blurSync",{detail:{url:e}})))})(e)},c=()=>{o&&cancelAnimationFrame(o),o=requestAnimationFrame(l)};n.addEventListener("load",c,{signal:t}),window.addEventListener("resize",()=>((e=150)=>{clearTimeout(a),a=setTimeout(l,e)})(120),{passive:!0,signal:t}),window.addEventListener("orientationchange",c,{signal:t}),document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&c()},{signal:t});const d=window.matchMedia?.("(prefers-color-scheme: dark)");d?.addEventListener?d.addEventListener("change",c,{signal:t}):d?.addListener&&!d.addEventListener&&(d.addListener(c),t.addEventListener("abort",()=>d.removeListener(c)));const u=["src","srcset","sizes","media"],m=new MutationObserver(c);if(m.observe(n,{attributes:!0,attributeFilter:u}),r){r.querySelectorAll("source").forEach(e=>{m.observe(e,{attributes:!0,attributeFilter:u})});const e=new MutationObserver(c);e.observe(r,{childList:!0,subtree:!0}),t.addEventListener("abort",()=>e.disconnect())}window.addEventListener("pagehide",()=>{try{m.disconnect()}catch{}cancelAnimationFrame(o),clearTimeout(a)},{once:!0,signal:t}),"complete"===document.readyState?l():window.addEventListener("load",l,{once:!0,signal:t}),c()}function initOfertaLightbox(){initOfertaLightbox._abort&&initOfertaLightbox._abort.abort();const e=new AbortController,{signal:t}=e;initOfertaLightbox._abort=e;const n=Array.from(document.querySelectorAll("#oferta .card picture img"));if(!n.length)return;const i=e=>document.createElement(e),r=document.documentElement,o=document.getElementById("main")||document.querySelector("main"),a=document.querySelector(".site-header");let s,l,c,d,u,m=document.querySelector(".lb-backdrop"),g=document.querySelector(".lb-wrap");if(m&&g)s=g.querySelector(".lb-viewport")||i("div"),l=g.querySelector("img")||new Image,c=document.querySelector(".lb-btn.lb-close"),d=document.querySelector(".lb-btn.lb-prev"),u=document.querySelector(".lb-btn.lb-next");else{m=i("div"),m.className="lb-backdrop",g=i("div"),g.className="lb-wrap",g.setAttribute("role","dialog"),g.setAttribute("aria-modal","true"),g.setAttribute("aria-label","Podgląd zdjęcia"),g.tabIndex=-1,s=i("div"),s.className="lb-viewport",l=new Image,l.alt="",l.decoding="async",s.appendChild(l),g.appendChild(s);const e=(e,t,n)=>{const r=i("button");return r.type="button",r.className=`lb-btn ${e}`,r.setAttribute("aria-label",t),r.innerHTML=n,r},t='<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15.7 5.3a1 1 0 0 1 0 1.4L11.4 11l4.3 4.3a 1 1 0 1 1-1.4 1.4l-5-5a 1 1 0 0 1 0-1.4l5-5a 1 1 0 0 1 1.4 0z"/></svg>',n='<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8.3 5.3a 1 1 0 0 0 0 1.4L12.6 11l-4.3 4.3a 1 1 0 1 0 1.4 1.4l5-5a 1 1 0 0 0 0-1.4l-5-5a 1 1 0 0 0-1.4 0z"/></svg>';c=e("lb-close","Zamknij podgląd",'<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M18.3 5.7a1 1 0 0 0-1.4 0L12 10.6 7.1 5.7A1 1 0 0 0 5.7 7.1L10.6 12l-4.9 4.9a1 1 0 1 0 1.4 1.4L12 13.4l4.9 4.9a1 1 0 0 0 1.4-1.4L13.4 12l4.9-4.9a1 1 0 0 0 0-1.4z"/></svg>'),d=e("lb-prev","Poprzednie zdjęcie",t),u=e("lb-next","Następne zdjęcie",n),document.body.append(m,g,c,d,u)}const p=e=>e?e.split(",").map(e=>e.trim()).map(e=>{const t=e.match(/(.+)\s+(\d+)w$/);return t?{url:t[1],w:parseInt(t[2],10)}:{url:e.split(" ")[0],w:0}}).sort((e,t)=>t.w-e.w):[],h=e=>{let t=p(e.getAttribute("srcset"))[0]?.url;if(!t){const n=e.closest("picture");if(n){const e=[];n.querySelectorAll("source").forEach(t=>{e.push(...p(t.getAttribute("srcset")))}),e.sort((e,t)=>t.w-e.w),t=e[0]?.url||null}}return t||e.currentSrc||e.src||""},f=e=>{if(e<0||e>=n.length)return;const t=h(n[e]);if(t){(new Image).src=t}};let v=0,b=!1,y=null;const w=()=>{const e=n[v],t=h(e);t&&(l.src=t,l.alt=e.getAttribute("alt")||"",f((v+1)%n.length),f((v-1+n.length)%n.length))},L=e=>{b=e,m.classList.toggle("is-open",e),g.classList.toggle("is-open",e),c.classList.toggle("is-open",e),r.classList.toggle("lb-no-scroll",e),g.setAttribute("aria-hidden",e?"false":"true");try{o&&"inert"in o&&(o.inert=e),a&&"inert"in a&&(a.inert=e)}catch{}if(e){y=document.activeElement,w();const e=n.length>1;d.style.display=e?"":"none",u.style.display=e?"":"none",(c||g).focus({preventScroll:!0})}else l.src="",l.alt="",y?.focus?.({preventScroll:!0}),y=null},E=()=>{n.length<2||(v=(v-1+n.length)%n.length,w())},S=()=>{n.length<2||(v=(v+1)%n.length,w())};n.forEach((e,n)=>{e.setAttribute("tabindex","0"),e.setAttribute("role","button"),e.setAttribute("aria-label","Powiększ zdjęcie"),e.addEventListener("click",e=>{e.preventDefault(),v=n,L(!0)},{signal:t}),e.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key&&"Space"!==e.code||(e.preventDefault(),v=n,L(!0))},{signal:t})}),c?.addEventListener("click",()=>L(!1),{signal:t}),d?.addEventListener("click",E,{signal:t}),u?.addEventListener("click",S,{signal:t}),m.addEventListener("click",()=>L(!1),{signal:t}),document.addEventListener("keydown",e=>{if(b)if("Escape"===e.key)L(!1);else if("ArrowLeft"===e.key)E();else if("ArrowRight"===e.key)S();else if("Tab"===e.key){const t=[c,d,u].filter(Boolean);if(!t.length)return;const n=t[0],i=t[t.length-1];e.shiftKey&&document.activeElement===n?(e.preventDefault(),i.focus()):e.shiftKey||document.activeElement!==i||(e.preventDefault(),n.focus())}},{signal:t});let k=0,A=0,q=!1;(g.querySelector(".lb-viewport")||g).addEventListener("touchstart",e=>{const t=e.changedTouches?.[0];t&&(k=t.clientX,A=t.clientY,q=!1)},{passive:!0,signal:t}),(g.querySelector(".lb-viewport")||g).addEventListener("touchmove",()=>{q=!0},{passive:!0,signal:t}),(g.querySelector(".lb-viewport")||g).addEventListener("touchend",e=>{if(!q)return;const t=e.changedTouches?.[0];if(!t)return;const n=t.clientX-k,i=t.clientY-A;Math.abs(n)>50&&Math.abs(n)>Math.abs(i)&&(n<0?S():E())},{passive:!0,signal:t}),window.addEventListener("pagehide",()=>e.abort(),{once:!0,signal:t})}function initOfertaScroller(){initOfertaScroller._abort&&initOfertaScroller._abort.abort();const e=new AbortController,{signal:t}=e;initOfertaScroller._abort=e;const n=document.getElementById("oferta-scroller"),i=document.getElementById("oferta-track");if(!n||!i)return;const r=n.querySelector(".scroller-btn.prev"),o=n.querySelector(".scroller-btn.next");r&&r.setAttribute("aria-controls",i.id),o&&o.setAttribute("aria-controls",i.id),i.hasAttribute("tabindex")||(i.tabIndex=0);const a=window.matchMedia("(prefers-reduced-motion: reduce)").matches?"auto":"smooth",s=()=>Math.max((i.querySelector(".card")?.getBoundingClientRect().width||0)+(parseFloat(getComputedStyle(i).gap)||0),Math.round(.9*i.clientWidth)),l=(e,t)=>{e&&(e.setAttribute("aria-disabled",String(!!t)),"disabled"in e&&(e.disabled=!!t))},c=()=>{const e=Math.max(0,i.scrollWidth-i.clientWidth-1),t=Math.round(i.scrollLeft),a=t<=1,s=t>=e,c=i.scrollWidth<=i.clientWidth+1;n.classList.toggle("at-start",a),n.classList.toggle("at-end",s),n.classList.toggle("fits",c),l(r,a||c),l(o,s||c)};let d=!1;i.addEventListener("scroll",()=>{d||(d=!0,requestAnimationFrame(()=>{d=!1,c()}))},{passive:!0,signal:t});if(window.addEventListener("resize",()=>c(),{passive:!0,signal:t}),"onscrollend"in window)i.addEventListener("scrollend",c,{signal:t});else{let e;i.addEventListener("scroll",()=>{clearTimeout(e),e=setTimeout(c,120)},{passive:!0,signal:t})}const u=new ResizeObserver(()=>c());u.observe(i),t.addEventListener("abort",()=>u.disconnect()),i.querySelectorAll("img").forEach(e=>{e.complete||(e.addEventListener("load",c,{once:!0,signal:t}),e.addEventListener("error",c,{once:!0,signal:t}))});const m=e=>i.scrollBy({left:e*s(),behavior:a});r?.addEventListener("click",()=>m(-1),{signal:t}),o?.addEventListener("click",()=>m(1),{signal:t});const g=(e,n)=>{if(!e)return;let r;const o=()=>{clearInterval(r),r=null};e.addEventListener("pointerdown",t=>{0===t.button&&(e.setPointerCapture?.(t.pointerId),r=setInterval(()=>{i.scrollBy({left:n*Math.max(40,s()/6),behavior:"auto"})},50))},{signal:t}),e.addEventListener("pointerup",o,{signal:t}),e.addEventListener("pointercancel",o,{signal:t}),e.addEventListener("lostpointercapture",o,{signal:t}),e.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key&&"Space"!==e.code||(e.preventDefault(),m(n))},{signal:t})};g(r,-1),g(o,1),i.addEventListener("keydown",e=>{"ArrowRight"===e.key?(e.preventDefault(),m(1)):"ArrowLeft"===e.key?(e.preventDefault(),m(-1)):"Home"===e.key?(e.preventDefault(),i.scrollTo({left:0,behavior:a})):"End"===e.key&&(e.preventDefault(),i.scrollTo({left:i.scrollWidth,behavior:a}))},{signal:t}),i.addEventListener("wheel",e=>{Math.abs(e.deltaY)>Math.abs(e.deltaX)&&(e.preventDefault(),i.scrollBy({left:e.deltaY,behavior:"auto"}))},{passive:!1,signal:t}),c(),window.addEventListener("pagehide",()=>e.abort(),{once:!0,signal:t})}function initOfferPrefetch(){initOfferPrefetch._abort&&initOfferPrefetch._abort.abort();const e=new AbortController,{signal:t}=e;initOfferPrefetch._abort=e;if(!(()=>{const e=navigator,t=e&&"connection"in e?e.connection:null;if(t?.saveData)return!1;const n=(t?.effectiveType||"").toLowerCase();return!n.includes("2g")&&"slow-2g"!==n})())return;const n=Array.from(document.querySelectorAll('.services-track h3 a[href^="oferta/"], #oferta .card h3 a[href^="oferta/"]'));if(!n.length)return;const i=new Set,r=new WeakMap,o=e=>{if(!(e=>{try{const t=new URL(e,location.href);return("http:"===t.protocol||"https:"===t.protocol)&&t.origin===location.origin}catch{return!1}})(e))return;if(i.has(e))return;if(document.querySelector(`link[rel="prefetch"][href="${e}"]`))return void i.add(e);const t=document.createElement("link");t.rel="prefetch",t.href=e,document.head.appendChild(t),i.add(e)},a=e=>{s(e);const t=setTimeout(()=>o(e.href),120);r.set(e,t)},s=e=>{const t=r.get(e);t&&(clearTimeout(t),r.delete(e))};n.forEach(e=>{e.addEventListener("mouseenter",()=>a(e),{signal:t}),e.addEventListener("mouseleave",()=>s(e),{signal:t}),e.addEventListener("focus",()=>a(e),{signal:t}),e.addEventListener("blur",()=>s(e),{signal:t}),e.addEventListener("touchstart",()=>o(e.href),{passive:!0,once:!0,signal:t})}),window.addEventListener("pagehide",()=>e.abort(),{once:!0,signal:t})}function initHomeHelpers(){initHomeHelpers._abort&&initHomeHelpers._abort.abort();const e=new AbortController,{signal:t}=e;initHomeHelpers._abort=e;const n=!!document.querySelector("#kontakt")||!!document.querySelector("#oferta")||!!document.querySelector("#strona-glowna");n&&document.addEventListener("click",e=>{if(!e.target.closest('a.scroll-top, a[href="#top"]'))return;const t=e.defaultPrevented,n=window.matchMedia("(prefers-reduced-motion: reduce)").matches?"auto":"smooth",i=document.getElementById("top");t?i&&"function"==typeof i.focus&&(i.setAttribute("tabindex","-1"),i.focus({preventScroll:!0}),setTimeout(()=>i.removeAttribute("tabindex"),800)):(e.preventDefault(),i?.scrollIntoView?(i.scrollIntoView({behavior:n}),"function"==typeof i.focus&&(i.setAttribute("tabindex","-1"),i.focus({preventScroll:!0}),setTimeout(()=>i.removeAttribute("tabindex"),800))):window.scrollTo({top:0,behavior:n})),history.replaceState(null,"",location.pathname+location.search)},{signal:t}),function(){if(!n)return;const e=document.querySelector("#kontakt form");if(!e)return;const t=new URLSearchParams(location.search).get("usluga");if(!t)return;let i=e.querySelector('[name="usluga"]');i||(i=document.createElement("input"),i.type="hidden",i.name="usluga",e.appendChild(i)),i.value=t,history.replaceState(null,"",location.pathname+location.hash)}(),window.addEventListener("pagehide",()=>e.abort(),{once:!0,signal:t})}!function(){const e=()=>{"function"==typeof initNav&&initNav(),"function"==typeof initHeaderShrink&&initHeaderShrink(),"function"==typeof initScrollSpy&&initScrollSpy(),"function"==typeof initFooterYear&&initFooterYear(),"function"==typeof initSmoothTop&&initSmoothTop(),"function"==typeof initSkipNext&&initSkipNext(),"function"==typeof initThemeToggle&&initThemeToggle(),"function"==typeof initRipple&&initRipple(),"function"==typeof initHeroBlurSync&&initHeroBlurSync(),"function"==typeof initOfertaLightbox&&initOfertaLightbox(),"function"==typeof initOfertaScroller&&initOfertaScroller(),"function"==typeof initOfferPrefetch&&initOfferPrefetch(),"function"==typeof initHomeHelpers&&initHomeHelpers(),"function"==typeof initContactForm&&initContactForm()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}();